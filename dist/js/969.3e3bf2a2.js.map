{"version":3,"file":"js/969.3e3bf2a2.js","mappings":"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","sources":["webpack://js-shop/./src/components/LoadingImg.vue","webpack://js-shop/./src/components/LoadingImg.vue?82c5","webpack://js-shop/./src/views/main/cart/CartList.vue","webpack://js-shop/./src/views/main/cart/CartList.vue?b1bc"],"sourcesContent":["<template>\r\n    <LoadingPage :active=\"loadStatus\" :opacity=\"0.9\" :background-color=\"`#fff`\">\r\n        <img\r\n        :src=\"img\"\r\n        alt=\"\"\r\n        style=\"width: 250px; height: 250px\"\r\n        />\r\n    </LoadingPage>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: ['loadStatus'],\r\n  data () {\r\n    return {\r\n      img: './assets/images/pokemon/pika.gif'\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./LoadingImg.vue?vue&type=template&id=f5350354\"\nimport script from \"./LoadingImg.vue?vue&type=script&lang=js\"\nexport * from \"./LoadingImg.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\user007\\\\Desktop\\\\project\\\\js-shop\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <LoadingImg :loadStatus=\"isLoading\"></LoadingImg>\r\n  <section class=\"mainCartList\">\r\n    <div class=\"container\">\r\n      <div class=\"row\">\r\n        <div class=\"col-md-8\">\r\n          <ul class=\"list-group\">\r\n            <li class=\"list-group-item\"\r\n              v-for=\"item in cartList\"\r\n              :key=\"item.id\"\r\n            >\r\n              <div class=\"col-md-4\">\r\n                <div class=\"imgBox\">\r\n                  <img :src=\"item.product.imageUrl\" :alt=\"item.product.title\">\r\n                </div>\r\n              </div>\r\n              <div class=\"col-md-8\">\r\n                <h4>{{ item.product.title }}</h4>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"itemQty\"\r\n                  id=\"itemQty\"\r\n                  v-model=\"item.qty\"\r\n                  min=\"1\"\r\n                  @change.prevent=\"updateCart(item)\"\r\n                />\r\n                <p v-if=\"item.coupon\">\r\n                  優惠價 {{ item.final_total }}(折扣{{ item.coupon.percent }}%)\r\n                </p>\r\n                <p v-else>特價 {{ item.final_total }}</p>\r\n                <button\r\n                  type=\"button\"\r\n                  @click.prevent=\"removeItem(item.id)\"\r\n                >\r\n                  <p>刪除</p>\r\n                </button>\r\n              </div>\r\n            </li>\r\n          </ul>\r\n          <div class=\"cleanBtnn\">\r\n            <button\r\n              type=\"button\"\r\n              @click.prevent=\"cleanAll\"\r\n            >\r\n              <p>全部清空</p>\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-md-4\">\r\n          <h5>購物車資訊</h5>\r\n          <div class=\"inputCode\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"輸入優惠碼\"\r\n              v-model=\"Code\"\r\n            />\r\n            <button\r\n              type=\"button\"\r\n              @click.prevent=\"enterCode\"\r\n            >\r\n              <p>套用</p>\r\n            </button>\r\n          </div>\r\n          <p>金額小計 {{ total }}</p>\r\n          <p>折價 {{ total - final_total }}</p>\r\n          <p>運費 0</p>\r\n          <p>總計 {{ final_total }}</p>\r\n          <a href=\"#\" @click.prevent=\"nextStep()\">\r\n            <p>結帳</p>\r\n          </a>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport LoadingImg from '@/components/LoadingImg.vue'\r\n\r\nexport default {\r\n  components: {\r\n    LoadingImg\r\n  },\r\n  data () {\r\n    return {\r\n      cartList: null,\r\n      total: null,\r\n      final_total: null,\r\n      Code: null,\r\n      isLoading: false\r\n    }\r\n  },\r\n  methods: {\r\n    // 取得所有資料\r\n    getCartList () {\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\r\n      this.isLoading = true\r\n      this.axios.get(api).then((res) => {\r\n        this.cartList = res.data.data.carts\r\n        this.total = res.data.data.total\r\n        this.final_total = res.data.data.final_total\r\n        this.isLoading = false\r\n      })\r\n    },\r\n    // 更新單筆數量\r\n    updateCart (item) {\r\n      const { id, qty, product_id: proId } = item\r\n      const cartItem = {\r\n        product_id: proId,\r\n        qty: qty\r\n      }\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${id}`\r\n      this.axios.put(api, { data: cartItem }).then((res) => {\r\n        console.log(res)\r\n        this.getCartList()\r\n      })\r\n    },\r\n    // 刪除單筆\r\n    removeItem (id) {\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${id}`\r\n      this.axios.delete(api).then((res) => {\r\n        console.log(res)\r\n        this.getCartList()\r\n      })\r\n    },\r\n    // 全部刪除\r\n    cleanAll () {\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/carts`\r\n      this.axios.delete(api).then((res) => {\r\n        console.log(res)\r\n        this.getCartList()\r\n      })\r\n    },\r\n    // 套用優惠碼\r\n    enterCode () {\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/coupon`\r\n      const code = {\r\n        code: this.Code\r\n      }\r\n      this.axios.post(api, { data: code }).then((res) => {\r\n        console.log(res)\r\n        this.getCartList()\r\n      })\r\n    },\r\n    // 結帳\r\n    nextStep () {\r\n      this.$router.push({ name: 'cartform' })\r\n    }\r\n  },\r\n  created () {\r\n    this.getCartList()\r\n  }\r\n}\r\n</script>\r\n<style lang=\"sass\">\r\n  section.mainCartList\r\n    padding: 60px 0\r\n  .list-group-item\r\n    display: flex\r\n  .imgBox\r\n    width: 100%\r\n    img\r\n      width: 100%\r\n</style>\r\n","import { render } from \"./CartList.vue?vue&type=template&id=9adf0ed4\"\nimport script from \"./CartList.vue?vue&type=script&lang=js\"\nexport * from \"./CartList.vue?vue&type=script&lang=js\"\n\nimport \"./CartList.vue?vue&type=style&index=0&id=9adf0ed4&lang=sass\"\n\nimport exportComponent from \"C:\\\\Users\\\\user007\\\\Desktop\\\\project\\\\js-shop\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createBlock","_component_LoadingPage","active","$props","opacity","_createElementVNode","src","$data","alt","style","props","data","img","__exports__","render","class","_hoisted_14","_hoisted_17","_hoisted_22","_hoisted_25","_createVNode","_component_LoadingImg","loadStatus","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_createElementBlock","_Fragment","item","key","id","_hoisted_6","_hoisted_7","product","imageUrl","title","_hoisted_9","type","name","qty","min","onChange","$options","coupon","final_total","percent","onClick","_hoisted_16","_hoisted_19","_hoisted_20","_hoisted_21","placeholder","_hoisted_24","href","components","LoadingImg","cartList","total","Code","isLoading","methods","getCartList","api","this","axios","get","then","res","carts","updateCart","product_id","proId","cartItem","put","console","log","removeItem","delete","cleanAll","enterCode","code","post","nextStep","$router","push","created"],"sourceRoot":""}