"use strict";(self["webpackChunkjs_shop"]=self["webpackChunkjs_shop"]||[]).push([[23],{7364:function(t,l,a){a.d(l,{Z:function(){return u}});var s=a(3099);const e=["src"];function i(t,l,a,i,n,o){const c=(0,s.up)("LoadingPage");return(0,s.wg)(),(0,s.j4)(c,{active:a.loadStatus,opacity:.9,"background-color":"#fff"},{default:(0,s.w5)((()=>[(0,s._)("img",{src:n.img,alt:"",style:{width:"250px",height:"250px"}},null,8,e)])),_:1},8,["active","opacity"])}var n={props:["loadStatus"],data(){return{img:"./assets/images/pokemon/pika.gif"}}},o=a(5727);const c=(0,o.Z)(n,[["render",i]]);var u=c},4023:function(t,l,a){a.r(l),a.d(l,{default:function(){return st}});var s=a(3099),e=a(5860),i=a(8317);const n={class:"mainCartList"},o={class:"container-lg"},c={key:0,class:"emptyText"},u=(0,s._)("h3",null,"目前購物車是空的!",-1),r=(0,s._)("h4",null,"前往商店 GO",-1),d=[r],p={key:1,class:"row"},_={class:"col-md-8"},h={class:"cartList"},g={class:"cart-list-group"},v={class:"cartImageBox"},m={class:"imgBox"},C=["src","alt"],b={class:"cartDetailList"},y={key:0,class:"finalPrice"},w={class:"orginPrice"},f={key:1,class:"finalPrice"},x=["onClick"],k={class:"unitBox"},L=["onClick"],S=(0,s._)("p",null,"+",-1),M=[S],z={class:"unitText"},D=["onClick"],j=(0,s._)("p",null,"-",-1),B=[j],I={class:"cleanBtn"},$=(0,s._)("p",null,"全部清空",-1),q=[$],P={class:"col-md-4"},Z={class:"paymentDeatil"},A={class:"titleBox"},G=(0,s._)("h3",null,"購物車資訊",-1),T={class:"inputCode input-group"},U=(0,s._)("p",null,"套用",-1),H=[U],Y={class:"table"},K=(0,s._)("th",null,[(0,s._)("p",null,"小計")],-1),N={class:"text-end"},O=(0,s._)("th",null,[(0,s._)("p",null,"折價")],-1),V={class:"text-end"},W=(0,s._)("tr",null,[(0,s._)("th",null,[(0,s._)("p",null,"運費")]),(0,s._)("td",{class:"text-end"},[(0,s._)("p",null,"0")])],-1),E={colspan:"2",class:"text-end"},F={class:"nextStepBox"},J=(0,s._)("p",null,"下一步",-1),Q=[J];function R(t,l,a,r,S,j){const $=(0,s.up)("LoadingImg");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)($,{loadStatus:S.isLoading},null,8,["loadStatus"]),(0,s._)("section",n,[(0,s._)("div",o,[0==S.cartList.length?((0,s.wg)(),(0,s.iD)("div",c,[u,(0,s._)("a",{href:"#",class:"viewMore",onClick:l[0]||(l[0]=(0,e.iM)(((...t)=>j.viewMore&&j.viewMore(...t)),["prevent"]))},d)])):((0,s.wg)(),(0,s.iD)("div",p,[(0,s._)("div",_,[(0,s._)("div",h,[(0,s._)("ul",g,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(S.cartList,(t=>((0,s.wg)(),(0,s.iD)("li",{class:"list-group-item",key:t.id},[(0,s._)("div",v,[(0,s._)("div",m,[(0,s._)("img",{src:t.product.imageUrl,alt:t.product.title},null,8,C)])]),(0,s._)("div",b,[(0,s._)("h6",null,(0,i.zw)(t.product.title),1),t.coupon?((0,s.wg)(),(0,s.iD)("div",y,[(0,s._)("h5",null,[(0,s.Uk)(" 優惠價 : "+(0,i.zw)(t.final_total)+" ",1),(0,s._)("span",null,"("+(0,i.zw)(t.coupon.percent)+"%)",1)]),(0,s._)("p",w," 原價 : "+(0,i.zw)(t.total),1)])):((0,s.wg)(),(0,s.iD)("div",f,[(0,s._)("h5",null," 特價 : "+(0,i.zw)(t.final_total),1)])),(0,s._)("a",{href:"",class:"removeBtn",onClick:(0,e.iM)((l=>j.removeItem(t.id)),["prevent"])},null,8,x),(0,s._)("div",k,[(0,s._)("button",(0,s.dG)({type:"button",class:"btn add"},{disabled:S.btnStatus},{onClick:(0,e.iM)((l=>j.updateCart(t,!0)),["prevent"])}),M,16,L),(0,s._)("div",z,[(0,s._)("p",null,(0,i.zw)(t.qty)+" "+(0,i.zw)(t.product.unit),1)]),(0,s._)("button",(0,s.dG)({type:"button",class:"btn remove"},{disabled:t.qty<=1||S.btnStatus},{onClick:(0,e.iM)((l=>j.updateCart(t,!1)),["prevent"])}),B,16,D)])])])))),128))]),(0,s._)("div",I,[(0,s._)("button",{type:"button",class:"btn",onClick:l[1]||(l[1]=(0,e.iM)(((...t)=>j.cleanAll&&j.cleanAll(...t)),["prevent"]))},q)])])]),(0,s._)("div",P,[(0,s._)("div",Z,[(0,s._)("div",A,[G,(0,s._)("div",T,[(0,s.wy)((0,s._)("input",{type:"text",placeholder:"輸入優惠碼","onUpdate:modelValue":l[2]||(l[2]=t=>S.Code=t)},null,512),[[e.nr,S.Code]]),(0,s._)("button",{type:"button",class:"btn btn-primary",onClick:l[3]||(l[3]=(0,e.iM)(((...t)=>j.enterCode&&j.enterCode(...t)),["prevent"]))},H)])]),(0,s._)("table",Y,[(0,s._)("tbody",null,[(0,s._)("tr",null,[K,(0,s._)("td",N,[(0,s._)("p",null,(0,i.zw)(S.total),1)])]),(0,s._)("tr",null,[O,(0,s._)("td",V,[(0,s._)("p",null,(0,i.zw)(S.final_total-S.total),1)])]),W]),(0,s._)("tfoot",null,[(0,s._)("tr",null,[(0,s._)("td",E,[(0,s._)("h4",null,"總計 NT$ :"+(0,i.zw)(S.final_total),1)])])])]),(0,s._)("div",F,[(0,s._)("button",{type:"button",class:"btn",onClick:l[4]||(l[4]=(0,e.iM)((t=>j.nextStep()),["prevent"]))},Q)])])])]))])])],64)}a(7658);var X=a(7364),tt={components:{LoadingImg:X.Z},data(){return{cartList:[],total:null,final_total:null,Code:null,isLoading:!1,btnStatus:!1}},methods:{getCartList(){const t="https://vue3-course-api.hexschool.io/api/jysing-aip/cart";this.isLoading=!0,this.axios.get(t).then((t=>{this.cartList=t.data.data.carts,this.total=t.data.data.total,this.final_total=t.data.data.final_total,this.isLoading=!1}))},updateCart(t,l){this.btnStatus=!0;let{id:a,qty:s,product_id:e}=t;!0===l?s+=1:s-=1;const i={product_id:e,qty:s},n=`https://vue3-course-api.hexschool.io/api/jysing-aip/cart/${a}`;this.axios.put(n,{data:i}).then((t=>{console.log(t),this.btnStatus=!1,this.getCartList()}))},removeItem(t){const l=`https://vue3-course-api.hexschool.io/api/jysing-aip/cart/${t}`;this.axios.delete(l).then((t=>{console.log(t),this.getCartList()}))},cleanAll(){const t="https://vue3-course-api.hexschool.io/api/jysing-aip/carts";this.axios.delete(t).then((t=>{console.log(t),this.getCartList()}))},enterCode(){const t="https://vue3-course-api.hexschool.io/api/jysing-aip/coupon",l={code:this.Code};this.axios.post(t,{data:l}).then((t=>{console.log(t),this.getCartList()}))},nextStep(){this.$router.push({name:"cartform"})},viewMore(){this.$router.push("/typeList/all")}},created(){this.getCartList()}},lt=a(5727);const at=(0,lt.Z)(tt,[["render",R]]);var st=at}}]);
//# sourceMappingURL=23.7272b532.js.map