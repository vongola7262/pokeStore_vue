"use strict";(self["webpackChunkjs_shop"]=self["webpackChunkjs_shop"]||[]).push([[867],{7364:function(e,t,a){a.d(t,{Z:function(){return g}});var n=a(3099);const i=["src"];function s(e,t,a,s,l,o){const r=(0,n.up)("LoadingPage");return(0,n.wg)(),(0,n.j4)(r,{active:a.loadStatus,opacity:.9,"background-color":"#fff"},{default:(0,n.w5)((()=>[(0,n._)("img",{src:l.img,alt:"",style:{width:"250px",height:"250px"}},null,8,i)])),_:1},8,["active","opacity"])}var l={props:["loadStatus"],data(){return{img:"./assets/images/pokemon/pika.gif"}}},o=a(5727);const r=(0,o.Z)(l,[["render",s]]);var g=r},4685:function(e,t,a){a.d(t,{Z:function(){return u}});var n=a(3099),i=a(8317),s=a(5860);const l={class:"pagination",id:"pageid"},o=["data-page"],r=["data-page","onClick"],g=["data-page"];function h(e,t,a,h,c,d){return(0,n.wg)(),(0,n.iD)("ul",l,[(0,n._)("li",{class:(0,i.C_)(["page-item",{disabled:!d.hasPage}])},[(0,n._)("a",{class:"page-link",href:"#","data-page":a.nowPage-1,onClick:t[0]||(t[0]=(0,s.iM)((e=>d.pageChange(a.nowPage-1)),["prevent"]))}," 上一頁 ",8,o)],2),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.num,(e=>((0,n.wg)(),(0,n.iD)("li",{class:(0,i.C_)(["page-item",{active:e===a.nowPage}]),key:e},[(0,n._)("a",{class:"page-link",href:"#","data-page":e,onClick:(0,s.iM)((t=>d.pageChange(e)),["prevent"])},(0,i.zw)(e),9,r)],2)))),128)),(0,n._)("li",{class:(0,i.C_)(["page-item",{disabled:!d.hasNext}])},[(0,n._)("a",{class:"page-link",href:"#","data-page":a.nowPage+1,onClick:t[1]||(t[1]=(0,s.iM)((e=>d.pageChange(a.nowPage+1)),["prevent"]))}," 下一頁 ",8,g)],2)])}var c={props:["num","nowPage"],methods:{pageChange(e){this.$emit("newpage",e),window.scrollTo({top:0,left:0,behavior:"smooth"})}},computed:{hasPage(){return this.nowPage>1},hasNext(){return this.nowPage<this.num}}},d=a(5727);const p=(0,d.Z)(c,[["render",h]]);var u=p},3867:function(e,t,a){a.r(t),a.d(t,{default:function(){return L}});var n=a(3099),i=a(5860),s=a(8317);const l=(0,n._)("p",null,"搜尋",-1),o=[l],r=(0,n._)("p",null,"清除",-1),g=[r],h={class:"table align-middle"},c=(0,n._)("thead",null,[(0,n._)("th"),(0,n._)("th",null,"訂單編號"),(0,n._)("th",null,"訂購人姓名"),(0,n._)("th",null,"訂單總金額"),(0,n._)("th",null,"訂單狀態"),(0,n._)("th")],-1),d={key:0},p={key:1},u=["onClick"];function w(e,t,a,l,r,w){const _=(0,n.up)("LoadingImg"),k=(0,n.up)("UserPageList");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(_,{loadStatus:r.isLoading},null,8,["loadStatus"]),(0,n._)("section",null,[(0,n._)("div",null,[(0,n.wy)((0,n._)("input",{type:"text",placeholder:"請輸入關鍵字","onUpdate:modelValue":t[0]||(t[0]=e=>r.keyword=e)},null,512),[[i.nr,r.keyword]]),(0,n._)("button",{type:"button",onClick:t[1]||(t[1]=(0,i.iM)(((...e)=>w.keyWordSearch&&w.keyWordSearch(...e)),["prevent"]))},o),(0,n._)("button",{type:"button",onClick:t[2]||(t[2]=(0,i.iM)(((...e)=>w.cleanSearch&&w.cleanSearch(...e)),["prevent"]))},g)]),(0,n._)("div",null,[(0,n._)("table",h,[c,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(w.pageDetail,((e,t)=>((0,n.wg)(),(0,n.iD)("tr",{key:e.id},[(0,n._)("td",null,(0,s.zw)(t+1),1),(0,n._)("td",null,(0,s.zw)(e.id),1),(0,n._)("td",null,(0,s.zw)(e.user.name),1),(0,n._)("td",null,"NT$ "+(0,s.zw)(e.total),1),(0,n._)("td",null,[e.is_paid?((0,n.wg)(),(0,n.iD)("p",d,"已付款")):((0,n.wg)(),(0,n.iD)("p",p,"待付款"))]),(0,n._)("td",null,[(0,n._)("button",{type:"button",class:"btn btn-danger",onClick:(0,i.iM)((t=>w.checkOrder(e.id)),["prevent"])}," 查看更多 ",8,u)])])))),128))])])]),(0,n._)("div",null,[(0,n.Wm)(k,{num:r.pageTotal,"now-Page":r.page,onNewpage:w.resetPage},null,8,["num","now-Page","onNewpage"])])])],64)}a(7658);var _=a(4685),k=a(7364),f={components:{UserPageList:_.Z,LoadingImg:k.Z},data(){return{isLoading:!1,orderList:[],finalList:[],keyword:"",search:"",startPage:1,pageTotal:0,perpage:10,page:null}},methods:{getOrderList(e){const t=`https://vue3-course-api.hexschool.io/api/jysing-aip/orders?page=${e}`;this.isLoading=!0,this.axios.get(t).then((e=>{const t=[...this.orderList,...e.data.orders];this.orderList=t,e.data.pagination.has_next?this.getOrderList(this.startPage+=1):(this.calc(this.orderList.length),this.page=1,this.finalList=this.orderList,this.isLoading=!1)}))},checkOrder(e){this.$router.push(`/order/checkout/${e}`)},keyWordSearch(){this.search=this.keyword},cleanSearch(){this.search="",this.keyword=""},calc(e){const t=this.perpage;this.pageTotal=Math.ceil(e/t)},resetPage(e){this.page=e}},watch:{search(e){this.finalList=this.orderList.filter((t=>t.id.match(e))),this.calc(this.finalList.length),this.page=1}},computed:{pageDetail(){const e=this.pageTotal,t=this.perpage;let a=this.page;a>e&&(a=e);const n=a*t-t+1,i=a*t,s=[];return this.finalList.forEach(((e,t)=>{const a=t+1;a>=n&&a<=i&&s.push(e)})),s}},created(){this.getOrderList(this.startPage)}},m=a(5727);const v=(0,m.Z)(f,[["render",w]]);var L=v}}]);
//# sourceMappingURL=867.2457cde5.js.map