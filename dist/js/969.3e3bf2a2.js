"use strict";(self["webpackChunkjs_shop"]=self["webpackChunkjs_shop"]||[]).push([[969],{7364:function(t,a,o){o.d(a,{Z:function(){return u}});var e=o(3099);const i=["src"];function n(t,a,o,n,l,s){const c=(0,e.up)("LoadingPage");return(0,e.wg)(),(0,e.j4)(c,{active:o.loadStatus,opacity:.9,"background-color":"#fff"},{default:(0,e.w5)((()=>[(0,e._)("img",{src:l.img,alt:"",style:{width:"250px",height:"250px"}},null,8,i)])),_:1},8,["active","opacity"])}var l={props:["loadStatus"],data(){return{img:"./assets/images/pokemon/pika.gif"}}},s=o(5727);const c=(0,s.Z)(l,[["render",n]]);var u=c},4969:function(t,a,o){o.r(a),o.d(a,{default:function(){return $}});var e=o(3099),i=o(8317),n=o(5860);const l={class:"mainCartList"},s={class:"container"},c={class:"row"},u={class:"col-md-8"},r={class:"list-group"},p={class:"col-md-4"},d={class:"imgBox"},h=["src","alt"],g={class:"col-md-8"},_=["onUpdate:modelValue","onChange"],m={key:0},v={key:1},C=["onClick"],y=(0,e._)("p",null,"刪除",-1),f=[y],w={class:"cleanBtnn"},L=(0,e._)("p",null,"全部清空",-1),x=[L],k={class:"col-md-4"},b=(0,e._)("h5",null,"購物車資訊",-1),j={class:"inputCode"},z=(0,e._)("p",null,"套用",-1),S=[z],D=(0,e._)("p",null,"運費 0",-1),M=(0,e._)("p",null,"結帳",-1),q=[M];function I(t,a,o,y,L,z){const M=(0,e.up)("LoadingImg");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e.Wm)(M,{loadStatus:L.isLoading},null,8,["loadStatus"]),(0,e._)("section",l,[(0,e._)("div",s,[(0,e._)("div",c,[(0,e._)("div",u,[(0,e._)("ul",r,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(L.cartList,(t=>((0,e.wg)(),(0,e.iD)("li",{class:"list-group-item",key:t.id},[(0,e._)("div",p,[(0,e._)("div",d,[(0,e._)("img",{src:t.product.imageUrl,alt:t.product.title},null,8,h)])]),(0,e._)("div",g,[(0,e._)("h4",null,(0,i.zw)(t.product.title),1),(0,e.wy)((0,e._)("input",{type:"number",name:"itemQty",id:"itemQty","onUpdate:modelValue":a=>t.qty=a,min:"1",onChange:(0,n.iM)((a=>z.updateCart(t)),["prevent"])},null,40,_),[[n.nr,t.qty]]),t.coupon?((0,e.wg)(),(0,e.iD)("p",m," 優惠價 "+(0,i.zw)(t.final_total)+"(折扣"+(0,i.zw)(t.coupon.percent)+"%) ",1)):((0,e.wg)(),(0,e.iD)("p",v,"特價 "+(0,i.zw)(t.final_total),1)),(0,e._)("button",{type:"button",onClick:(0,n.iM)((a=>z.removeItem(t.id)),["prevent"])},f,8,C)])])))),128))]),(0,e._)("div",w,[(0,e._)("button",{type:"button",onClick:a[0]||(a[0]=(0,n.iM)(((...t)=>z.cleanAll&&z.cleanAll(...t)),["prevent"]))},x)])]),(0,e._)("div",k,[b,(0,e._)("div",j,[(0,e.wy)((0,e._)("input",{type:"text",placeholder:"輸入優惠碼","onUpdate:modelValue":a[1]||(a[1]=t=>L.Code=t)},null,512),[[n.nr,L.Code]]),(0,e._)("button",{type:"button",onClick:a[2]||(a[2]=(0,n.iM)(((...t)=>z.enterCode&&z.enterCode(...t)),["prevent"]))},S)]),(0,e._)("p",null,"金額小計 "+(0,i.zw)(L.total),1),(0,e._)("p",null,"折價 "+(0,i.zw)(L.total-L.final_total),1),D,(0,e._)("p",null,"總計 "+(0,i.zw)(L.final_total),1),(0,e._)("a",{href:"#",onClick:a[3]||(a[3]=(0,n.iM)((t=>z.nextStep()),["prevent"]))},q)])])])])],64)}o(7658);var U=o(7364),Z={components:{LoadingImg:U.Z},data(){return{cartList:null,total:null,final_total:null,Code:null,isLoading:!1}},methods:{getCartList(){const t="https://vue3-course-api.hexschool.io/api/jysing-aip/cart";this.isLoading=!0,this.axios.get(t).then((t=>{this.cartList=t.data.data.carts,this.total=t.data.data.total,this.final_total=t.data.data.final_total,this.isLoading=!1}))},updateCart(t){const{id:a,qty:o,product_id:e}=t,i={product_id:e,qty:o},n=`https://vue3-course-api.hexschool.io/api/jysing-aip/cart/${a}`;this.axios.put(n,{data:i}).then((t=>{console.log(t),this.getCartList()}))},removeItem(t){const a=`https://vue3-course-api.hexschool.io/api/jysing-aip/cart/${t}`;this.axios.delete(a).then((t=>{console.log(t),this.getCartList()}))},cleanAll(){const t="https://vue3-course-api.hexschool.io/api/jysing-aip/carts";this.axios.delete(t).then((t=>{console.log(t),this.getCartList()}))},enterCode(){const t="https://vue3-course-api.hexschool.io/api/jysing-aip/coupon",a={code:this.Code};this.axios.post(t,{data:a}).then((t=>{console.log(t),this.getCartList()}))},nextStep(){this.$router.push({name:"cartform"})}},created(){this.getCartList()}},A=o(5727);const V=(0,A.Z)(Z,[["render",I]]);var $=V}}]);
//# sourceMappingURL=969.3e3bf2a2.js.map