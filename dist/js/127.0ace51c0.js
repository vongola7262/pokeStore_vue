"use strict";(self["webpackChunkjs_shop"]=self["webpackChunkjs_shop"]||[]).push([[127],{7364:function(t,e,a){a.d(e,{Z:function(){return g}});var i=a(3099);const n=["src"];function s(t,e,a,s,o,r){const l=(0,i.up)("LoadingPage");return(0,i.wg)(),(0,i.j4)(l,{active:a.loadStatus,opacity:.9,"background-color":"#fff"},{default:(0,i.w5)((()=>[(0,i._)("img",{src:o.img,alt:"",style:{width:"250px",height:"250px"}},null,8,n)])),_:1},8,["active","opacity"])}var o={props:["loadStatus"],data(){return{img:"./assets/images/pokemon/pika.gif"}}},r=a(5727);const l=(0,r.Z)(o,[["render",s]]);var g=l},4685:function(t,e,a){a.d(e,{Z:function(){return u}});var i=a(3099),n=a(8317),s=a(5860);const o={class:"pagination",id:"pageid"},r=["data-page"],l=["data-page","onClick"],g=["data-page"];function h(t,e,a,h,d,p){return(0,i.wg)(),(0,i.iD)("ul",o,[(0,i._)("li",{class:(0,n.C_)(["page-item",{disabled:!p.hasPage}])},[(0,i._)("a",{class:"page-link",href:"#","data-page":a.nowPage-1,onClick:e[0]||(e[0]=(0,s.iM)((t=>p.pageChange(a.nowPage-1)),["prevent"]))}," 上一頁 ",8,r)],2),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.num,(t=>((0,i.wg)(),(0,i.iD)("li",{class:(0,n.C_)(["page-item",{active:t===a.nowPage}]),key:t},[(0,i._)("a",{class:"page-link",href:"#","data-page":t,onClick:(0,s.iM)((e=>p.pageChange(t)),["prevent"])},(0,n.zw)(t),9,l)],2)))),128)),(0,i._)("li",{class:(0,n.C_)(["page-item",{disabled:!p.hasNext}])},[(0,i._)("a",{class:"page-link",href:"#","data-page":a.nowPage+1,onClick:e[1]||(e[1]=(0,s.iM)((t=>p.pageChange(a.nowPage+1)),["prevent"]))}," 下一頁 ",8,g)],2)])}var d={props:["num","nowPage"],methods:{pageChange(t){this.$emit("newpage",t),window.scrollTo({top:0,left:0,behavior:"smooth"})}},computed:{hasPage(){return this.nowPage>1},hasNext(){return this.nowPage<this.num}}},p=a(5727);const c=(0,p.Z)(d,[["render",h]]);var u=c},2127:function(t,e,a){a.r(e),a.d(e,{default:function(){return y}});var i=a(3099),n=a(5860),s=a(8317);const o=(0,i._)("p",null,"搜尋",-1),r=[o],l=(0,i._)("p",null,"清除",-1),g=[l],h={class:"table align-middle"},d=(0,i._)("thead",null,[(0,i._)("th"),(0,i._)("th",null,"訂單編號"),(0,i._)("th",null,"訂購人姓名"),(0,i._)("th",null,"訂單總金額"),(0,i._)("th",null,"訂單狀態"),(0,i._)("th")],-1),p={key:0},c={key:1},u=["onClick"];function w(t,e,a,o,l,w){const _=(0,i.up)("LoadingImg"),k=(0,i.up)("UserPageList");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(_,{loadStatus:l.isLoading},null,8,["loadStatus"]),(0,i._)("section",null,[(0,i._)("div",null,[(0,i.wy)((0,i._)("input",{type:"text",placeholder:"請輸入關鍵字","onUpdate:modelValue":e[0]||(e[0]=t=>l.keyword=t)},null,512),[[n.nr,l.keyword]]),(0,i._)("button",{type:"button",onClick:e[1]||(e[1]=(0,n.iM)((t=>w.keyWordSearch(!0)),["prevent"]))},r),(0,i._)("button",{type:"button",onClick:e[2]||(e[2]=(0,n.iM)((t=>w.keyWordSearch(!1)),["prevent"]))},g)]),(0,i._)("div",null,[(0,i._)("table",h,[d,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(w.pageDetail,((t,e)=>((0,i.wg)(),(0,i.iD)("tr",{key:t.id},[(0,i._)("td",null,(0,s.zw)(e+1),1),(0,i._)("td",null,(0,s.zw)(t.id),1),(0,i._)("td",null,(0,s.zw)(t.user.name),1),(0,i._)("td",null,"NT$ "+(0,s.zw)(t.total),1),(0,i._)("td",null,[t.is_paid?((0,i.wg)(),(0,i.iD)("p",p,"已付款")):((0,i.wg)(),(0,i.iD)("p",c,"待付款"))]),(0,i._)("td",null,[(0,i._)("button",{type:"button",class:"btn btn-danger",onClick:(0,n.iM)((e=>w.checkOrder(t.id)),["prevent"])}," 查看更多 ",8,u)])])))),128))])])]),(0,i._)("div",null,[(0,i.Wm)(k,{num:l.pageTotal,"now-Page":l.page,onNewpage:w.resetPage},null,8,["num","now-Page","onNewpage"])])])],64)}a(7658);var _=a(4685),k=a(7364),f={components:{UserPageList:_.Z,LoadingImg:k.Z},data(){return{isLoading:!1,orderList:[],finalList:[],keyword:"",search:"",startPage:1,pageTotal:0,perpage:10,page:null}},methods:{getOrderList(t){const e=`https://vue3-course-api.hexschool.io/api/jysing-aip/orders?page=${t}`;this.isLoading=!0,this.axios.get(e).then((t=>{const e=[...this.orderList,...t.data.orders];this.orderList=e,t.data.pagination.has_next?this.getOrderList(this.startPage+=1):(this.calc(this.orderList.length),this.page=1,this.finalList=this.orderList,this.isLoading=!1)}))},checkOrder(t){this.$router.push(`/order/checkout/${t}`)},keyWordSearch(t){!0===t?this.search=this.keyword:(this.search="",this.keyword=""),this.search=this.keyword},calc(t){const e=this.perpage;this.pageTotal=Math.ceil(t/e)},resetPage(t){this.page=t}},watch:{search(t){this.finalList=this.orderList.filter((e=>e.id.match(t))),this.calc(this.finalList.length),this.page=1}},computed:{pageDetail(){const t=this.pageTotal,e=this.perpage;let a=this.page;a>t&&(a=t);const i=a*e-e+1,n=a*e,s=[];return this.finalList.forEach(((t,e)=>{const a=e+1;a>=i&&a<=n&&s.push(t)})),s}},created(){this.getOrderList(this.startPage)}},m=a(5727);const v=(0,m.Z)(f,[["render",w]]);var y=v}}]);
//# sourceMappingURL=127.0ace51c0.js.map