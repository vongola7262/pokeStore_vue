"use strict";(self["webpackChunkjs_shop"]=self["webpackChunkjs_shop"]||[]).push([[235],{5314:function(t,s,e){var a=e(4334),i=e(9554),n=e(7775);const l=(0,n.Z)();s["Z"]=(0,a.Q_)("cartStore",{state:()=>({cartList:[],total:null,final_total:null,totalNum:0}),actions:{getCartList(){const t="https://vue3-course-api.hexschool.io/api/jysing-aip/cart";i.ZP.get(t).then((t=>{this.cartList=t.data.data.carts,this.total=t.data.data.total,this.final_total=t.data.data.final_total}))},addCart(t,s=1){const e="https://vue3-course-api.hexschool.io/api/jysing-aip/cart",a={data:{product_id:t,qty:s}};i.ZP.post(e,a).then((t=>{this.getCartList(),this.hintMessage(!0,"已加入購物車")})).catch((t=>{this.hintMessage(!1,t.message)}))},removeItem(t){const s=`https://vue3-course-api.hexschool.io/api/jysing-aip/cart/${t}`;i.ZP["delete"](s).then((t=>{this.getCartList(),this.hintMessage(!0,"已刪除")})).catch((t=>{this.hintMessage(!1,t.message)}))},cleanAll(){const t="https://vue3-course-api.hexschool.io/api/jysing-aip/carts";i.ZP["delete"](t).then((t=>{this.getCartList(),this.hintMessage(!0,"清空購物車")})).catch((t=>{this.hintMessage(!1,t.message)}))},updateCart(t,s){l.btnStatus=!0;let{id:e,qty:a,product_id:n}=t;!0===s?a+=1:a-=1;const o={product_id:n,qty:a},c=`https://vue3-course-api.hexschool.io/api/jysing-aip/cart/${e}`;i.ZP.put(c,{data:o}).then((t=>{l.btnStatus=!1,this.getCartList()})).catch((t=>{this.hintMessage(!1,t.message)}))},hintMessage(t,s){l.hintStatus.active=!0,l.hintStatus.status=t,l.hintStatus.text=s,setTimeout((()=>{l.hintStatus.active=!1,l.hintStatus.status=!1,l.hintStatus.text=""}),"1000")}},getters:{getQty(t){return t.cartList.length}}})},7775:function(t,s,e){var a=e(4334);s["Z"]=(0,a.Q_)("statusStore",{state:()=>({isLoading:!1,btnStatus:!1,hintStatus:{active:!1,status:!1,text:""}})})},3118:function(t,s,e){e.d(s,{Z:function(){return h}});var a=e(3099),i=e(8317);const n={key:0,class:"imgBox"},l=["src"],o={key:1,class:"imgBox"},c=["src"];function r(t,s,e,r,u,d){return(0,a.wg)(),(0,a.iD)("div",{class:(0,i.C_)(["hintBox",{active:e.isHint.active}])},[e.isHint.status?((0,a.wg)(),(0,a.iD)("div",n,[(0,a._)("img",{src:u.success,alt:""},null,8,l)])):((0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("img",{src:u.error,alt:""},null,8,c)])),(0,a._)("p",{class:(0,i.C_)({error:!e.isHint.status})},(0,i.zw)(e.isHint.text),3)],2)}var u={props:["isHint"],data(){return{success:"./assets/images/icon/checked.png",error:"./assets/images/icon/cancel.png"}}},d=e(5727);const p=(0,d.Z)(u,[["render",r]]);var h=p},7364:function(t,s,e){e.d(s,{Z:function(){return r}});var a=e(3099);const i=["src"];function n(t,s,e,n,l,o){const c=(0,a.up)("LoadingPage");return(0,a.wg)(),(0,a.j4)(c,{active:e.loadStatus,opacity:.9,"background-color":"#fff"},{default:(0,a.w5)((()=>[(0,a._)("img",{src:l.img,alt:"",style:{width:"250px",height:"250px"}},null,8,i)])),_:1},8,["active","opacity"])}var l={props:["loadStatus"],data(){return{img:"./assets/images/pokemon/pika.gif"}}},o=e(5727);const c=(0,o.Z)(l,[["render",n]]);var r=c},1235:function(t,s,e){e.r(s),e.d(s,{default:function(){return dt}});var a=e(3099),i=e(5860),n=e(8317);const l={class:"mainCartList"},o={class:"container-lg"},c={key:0,class:"emptyText"},r=(0,a._)("h3",null,"目前購物車是空的!",-1),u=(0,a._)("h4",null,"前往商店 GO",-1),d=[u],p={key:1,class:"row"},h={class:"col-md-8"},_={class:"cartList"},g={class:"cart-list-group"},v={class:"cartImageBox"},m={class:"imgBox"},C=["src","alt"],y={class:"cartDetailList"},w={key:0,class:"finalPrice"},b={class:"orginPrice"},f={key:1,class:"finalPrice"},x=["onClick"],S={class:"unitBox"},k=["onClick"],L=(0,a._)("p",null,"-",-1),M=[L],Z={class:"unitText"},D=["onClick"],H=(0,a._)("p",null,"+",-1),z=[H],B={class:"cleanBtn"},j=(0,a._)("p",null,"全部清空",-1),P=[j],I={class:"col-md-4"},q={class:"paymentDeatil"},$={class:"titleBox"},A=(0,a._)("h3",null,"購物車資訊",-1),Q={class:"inputCode input-group"},T={key:0,class:"errorCode"},G=(0,a._)("p",null,"套用",-1),N=[G],U={class:"table"},W=(0,a._)("th",null,[(0,a._)("p",null,"小計")],-1),Y={class:"text-end"},K=(0,a._)("th",null,[(0,a._)("p",null,"折價")],-1),O={class:"text-end"},V=(0,a._)("tr",null,[(0,a._)("th",null,[(0,a._)("p",null,"運費")]),(0,a._)("td",{class:"text-end"},[(0,a._)("p",null,"0")])],-1),E={colspan:"2",class:"text-end"},F={class:"nextStepBox"},J=(0,a._)("p",null,"繼續購物",-1),R=[J],X=(0,a._)("p",null,"下一步",-1),tt=[X];function st(t,s,e,u,L,H){const j=(0,a.up)("LoadingImg"),G=(0,a.up)("HintCard");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(j,{loadStatus:t.isLoading},null,8,["loadStatus"]),(0,a.Wm)(G,{isHint:t.hintStatus},null,8,["isHint"]),(0,a._)("section",l,[(0,a._)("div",o,[0==t.cartList.length?((0,a.wg)(),(0,a.iD)("div",c,[r,(0,a._)("a",{href:"#",class:"viewMore",onClick:s[0]||(s[0]=(0,i.iM)(((...t)=>H.viewMore&&H.viewMore(...t)),["prevent"]))},d)])):((0,a.wg)(),(0,a.iD)("div",p,[(0,a._)("div",h,[(0,a._)("div",_,[(0,a._)("ul",g,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.cartList,(s=>((0,a.wg)(),(0,a.iD)("li",{class:"list-group-item",key:s.id},[(0,a._)("div",v,[(0,a._)("div",m,[(0,a._)("img",{src:s.product.imageUrl,alt:s.product.title},null,8,C)])]),(0,a._)("div",y,[(0,a._)("h6",null,(0,n.zw)(s.product.title),1),s.coupon?((0,a.wg)(),(0,a.iD)("div",w,[(0,a._)("h5",null," 優惠價: "+(0,n.zw)(s.final_total),1),(0,a._)("div",b,[(0,a._)("p",null,"原價: "+(0,n.zw)(s.total),1)])])):((0,a.wg)(),(0,a.iD)("div",f,[(0,a._)("h5",null," 特價: "+(0,n.zw)(s.final_total),1)])),(0,a._)("a",{href:"",class:"removeBtn",onClick:(0,i.iM)((e=>t.removeItem(s.id)),["prevent"])},null,8,x),(0,a._)("div",S,[(0,a._)("button",(0,a.dG)({type:"button",class:"btn remove"},{disabled:s.qty<=1||t.btnStatus},{onClick:(0,i.iM)((e=>t.updateCart(s,!1)),["prevent"])}),M,16,k),(0,a._)("div",Z,[(0,a._)("p",null,(0,n.zw)(s.qty),1)]),(0,a._)("button",(0,a.dG)({type:"button",class:"btn add"},{disabled:t.btnStatus},{onClick:(0,i.iM)((e=>t.updateCart(s,!0)),["prevent"])}),z,16,D)])])])))),128))]),(0,a._)("div",B,[(0,a._)("button",{type:"button",class:"btn",onClick:s[1]||(s[1]=(0,i.iM)(((...s)=>t.cleanAll&&t.cleanAll(...s)),["prevent"]))},P)])])]),(0,a._)("div",I,[(0,a._)("div",q,[(0,a._)("div",$,[A,(0,a._)("div",Q,[""!==L.enterCodeStatus?((0,a.wg)(),(0,a.iD)("p",T,(0,n.zw)(L.enterCodeStatus),1)):(0,a.kq)("",!0),(0,a.wy)((0,a._)("input",{type:"text",placeholder:"輸入優惠碼","onUpdate:modelValue":s[2]||(s[2]=t=>L.Code=t)},null,512),[[i.nr,L.Code]]),(0,a._)("button",{type:"button",class:"btn btn-primary",onClick:s[3]||(s[3]=(0,i.iM)(((...t)=>H.enterCode&&H.enterCode(...t)),["prevent"]))},N)])]),(0,a._)("table",U,[(0,a._)("tbody",null,[(0,a._)("tr",null,[W,(0,a._)("td",Y,[(0,a._)("p",null,(0,n.zw)(t.total),1)])]),(0,a._)("tr",null,[K,(0,a._)("td",O,[(0,a._)("p",null,(0,n.zw)(t.final_total-t.total),1)])]),V]),(0,a._)("tfoot",null,[(0,a._)("tr",null,[(0,a._)("td",E,[(0,a._)("h4",null,"總計: NT$"+(0,n.zw)(t.final_total),1)])])])]),(0,a._)("div",F,[(0,a._)("button",{type:"button",class:"btn shop",onClick:s[4]||(s[4]=(0,i.iM)(((...t)=>H.viewMore&&H.viewMore(...t)),["prevent"]))},R),(0,a._)("button",{type:"button",class:"btn nextStep",onClick:s[5]||(s[5]=(0,i.iM)(((...t)=>H.nextStep&&H.nextStep(...t)),["prevent"]))},tt)])])])]))])])],64)}e(7658);var et=e(7364),at=e(3118),it=e(645),nt=e(5314),lt=e(7775),ot=e(4334);(0,it.QI)({title:"購物車"});var ct={components:{LoadingImg:et.Z,HintCard:at.Z},data(){return{Code:null,enterCodeStatus:""}},computed:{...(0,ot.rn)(nt.Z,["cartList","total","final_total","isLoading"]),...(0,ot.rn)(lt.Z,["isLoading","btnStatus","hintStatus"])},methods:{...(0,ot.nv)(nt.Z,["getCartList","removeItem","cleanAll","updateCart"]),enterCode(){const t="https://vue3-course-api.hexschool.io/api/jysing-aip/coupon",s={code:this.Code};this.axios.post(t,{data:s}).then((t=>{!0===t.data.success?(this.getCartList(),this.enterCodeStatus=""):(this.enterCodeStatus=t.data.message,this.Code=null)}))},nextStep(){this.$router.push({name:"cartform"})},viewMore(){this.$router.push("/typeList/all")}},created(){this.getCartList()}},rt=e(5727);const ut=(0,rt.Z)(ct,[["render",st]]);var dt=ut}}]);
//# sourceMappingURL=235.7e02d878.js.map