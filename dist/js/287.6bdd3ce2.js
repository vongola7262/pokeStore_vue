"use strict";(self["webpackChunkjs_shop"]=self["webpackChunkjs_shop"]||[]).push([[287],{7364:function(t,e,a){a.d(e,{Z:function(){return c}});var s=a(3099);const n=["src"];function i(t,e,a,i,l,o){const r=(0,s.up)("LoadingPage");return(0,s.wg)(),(0,s.j4)(r,{active:a.loadStatus,opacity:.9,"background-color":"#fff"},{default:(0,s.w5)((()=>[(0,s._)("img",{src:l.img,alt:"",style:{width:"250px",height:"250px"}},null,8,n)])),_:1},8,["active","opacity"])}var l={props:["loadStatus"],data(){return{img:"./assets/images/pokemon/pika.gif"}}},o=a(5727);const r=(0,o.Z)(l,[["render",i]]);var c=r},3981:function(t,e,a){a.d(e,{Z:function(){return d}});var s=a(3099),n=a(8317),i=a(5860);const l={key:0,class:"pagination",id:"pageid"},o=["data-page"],r=["data-page","onClick"],c=["data-page"];function p(t,e,a,p,h,g){return 0!==a.num?((0,s.wg)(),(0,s.iD)("ul",l,[(0,s._)("li",{class:(0,n.C_)(["page-item",{disabled:!g.hasPage}])},[(0,s._)("a",{class:"page-link",href:"#","data-page":a.nowPage-1,onClick:e[0]||(e[0]=(0,i.iM)((t=>g.pageChange(a.nowPage-1)),["prevent"]))}," 上一頁 ",8,o)],2),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.num,(t=>((0,s.wg)(),(0,s.iD)("li",{class:(0,n.C_)(["page-item",{active:t===a.nowPage}]),key:t},[(0,s._)("a",{class:"page-link",href:"#","data-page":t,onClick:(0,i.iM)((e=>g.pageChange(t)),["prevent"])},(0,n.zw)(t),9,r)],2)))),128)),(0,s._)("li",{class:(0,n.C_)(["page-item",{disabled:!g.hasNext}])},[(0,s._)("a",{class:"page-link",href:"#","data-page":a.nowPage+1,onClick:e[1]||(e[1]=(0,i.iM)((t=>g.pageChange(a.nowPage+1)),["prevent"]))}," 下一頁 ",8,c)],2)])):(0,s.kq)("",!0)}var h={props:["num","nowPage"],methods:{pageChange(t){this.$emit("newpage",t),window.scrollTo({top:0,left:0,behavior:"smooth"})}},computed:{hasPage(){return this.nowPage>1},hasNext(){return this.nowPage<this.num}}},g=a(5727);const u=(0,g.Z)(h,[["render",p]]);var d=u},9287:function(t,e,a){a.r(e),a.d(e,{default:function(){return z}});var s=a(3099),n=a(5860),i=a(8317);const l={class:"orderList"},o={class:"container-md"},r={class:"input-textBox"},c=(0,s._)("label",{for:"inputNum"},[(0,s._)("h5",null,"快速搜尋")],-1),p={class:"input-group"},h=(0,s._)("p",null,"搜尋",-1),g=[h],u=(0,s._)("p",null,"清除",-1),d=[u],_={class:"listBox table-responsive-md"},w={class:"table align-middle"},k=(0,s._)("thead",null,[(0,s._)("th"),(0,s._)("th",null,[(0,s._)("h6",null,"訂單編號")]),(0,s._)("th",null,[(0,s._)("h6",null,"訂購人")]),(0,s._)("th",{class:"totalPrice"},[(0,s._)("h6",null,"總金額")]),(0,s._)("th",null,[(0,s._)("h6",null,"狀態")]),(0,s._)("th")],-1),m={class:"totalPrice"},f={key:0,class:"payed"},y={key:1,class:"unpay"},v=["onClick"],L=(0,s._)("p",null,"查看更多",-1),b=[L],P={key:0,class:"noneList"},C=(0,s._)("td",{colspan:"6"},[(0,s._)("h4",null,"查無訂單，請重新搜尋")],-1),D=[C];function x(t,e,a,h,u,L){const C=(0,s.up)("LoadingImg"),x=(0,s.up)("UserPageList");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(C,{loadStatus:u.isLoading},null,8,["loadStatus"]),(0,s._)("section",l,[(0,s._)("div",o,[(0,s._)("div",r,[c,(0,s._)("div",p,[(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",placeholder:"請輸入訂單編號",id:"inputNum","onUpdate:modelValue":e[0]||(e[0]=t=>u.keyword=t)},null,512),[[n.nr,u.keyword]]),(0,s._)("button",{class:"btn btn-search",type:"button",onClick:e[1]||(e[1]=(0,n.iM)((t=>L.keyWordSearch(!0)),["prevent"]))},g),(0,s._)("button",{type:"button",class:"btn btn-clean",onClick:e[2]||(e[2]=(0,n.iM)((t=>L.keyWordSearch(!1)),["prevent"]))},d)])]),(0,s._)("div",_,[(0,s._)("table",w,[k,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(L.pageDetail,((t,e)=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id},[(0,s._)("td",null,[(0,s._)("p",null,(0,i.zw)(e+1),1)]),(0,s._)("td",null,[(0,s._)("p",null,(0,i.zw)(t.id),1)]),(0,s._)("td",null,[(0,s._)("p",null,(0,i.zw)(t.user.name),1)]),(0,s._)("td",m,[(0,s._)("p",null,"NT$ "+(0,i.zw)(t.total),1)]),(0,s._)("td",null,[t.is_paid?((0,s.wg)(),(0,s.iD)("p",f,"已付款")):((0,s.wg)(),(0,s.iD)("p",y,"待付款"))]),(0,s._)("td",null,[(0,s._)("button",{type:"button",class:"btn btn-more",onClick:(0,n.iM)((e=>L.checkOrder(t.id)),["prevent"])},b,8,v)])])))),128)),0==L.pageDetail.length?((0,s.wg)(),(0,s.iD)("tr",P,D)):(0,s.kq)("",!0)])])]),(0,s._)("div",null,[(0,s.Wm)(x,{num:u.pageTotal,"now-Page":u.page,onNewpage:L.resetPage},null,8,["num","now-Page","onNewpage"])])])])],64)}a(7658);var M=a(3981),N=a(7364),S={components:{UserPageList:M.Z,LoadingImg:N.Z},data(){return{isLoading:!1,orderList:[],finalList:[],keyword:"",search:"",startPage:1,pageTotal:0,perpage:10,page:null}},methods:{getOrderList(t){const e=`https://vue3-course-api.hexschool.io/api/jysing-aip/orders?page=${t}`;this.isLoading=!0,this.axios.get(e).then((t=>{const e=[...this.orderList,...t.data.orders];this.orderList=e,t.data.pagination.has_next?this.getOrderList(this.startPage+=1):(this.calc(this.orderList.length),this.page=1,this.finalList=this.orderList,this.isLoading=!1)}))},checkOrder(t){this.$router.push(`/order/checkout/${t}`)},keyWordSearch(t){!0===t?this.search=this.keyword:(this.search="",this.keyword=""),this.search=this.keyword},calc(t){const e=this.perpage;this.pageTotal=Math.ceil(t/e)},resetPage(t){this.page=t}},watch:{search(t){this.finalList=this.orderList.filter((e=>e.id.match(t))),this.calc(this.finalList.length),this.page=1}},computed:{pageDetail(){const t=this.pageTotal,e=this.perpage;let a=this.page;a>t&&(a=t);const s=a*e-e+1,n=a*e,i=[];return this.finalList.forEach(((t,e)=>{const a=e+1;a>=s&&a<=n&&i.push(t)})),i}},created(){this.getOrderList(this.startPage)}},Z=a(5727);const T=(0,Z.Z)(S,[["render",x]]);var z=T}}]);
//# sourceMappingURL=287.6bdd3ce2.js.map