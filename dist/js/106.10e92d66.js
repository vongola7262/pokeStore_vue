"use strict";(self["webpackChunkjs_shop"]=self["webpackChunkjs_shop"]||[]).push([[106],{5314:function(t,s,i){var a=i(4334),e=i(9554),o=i(7775);const r=(0,o.Z)();s["Z"]=(0,a.Q_)("cartStore",{state:()=>({cartList:[],total:null,final_total:null,totalNum:0}),actions:{getCartList(){const t="https://vue3-course-api.hexschool.io/api/jysing-aip/cart";r.isLoading=!0,e.ZP.get(t).then((t=>{this.cartList=t.data.data.carts,this.total=t.data.data.total,this.final_total=t.data.data.final_total,r.isLoading=!1}))},addCart(t,s=1){const i="https://vue3-course-api.hexschool.io/api/jysing-aip/cart",a={data:{product_id:t,qty:s}};e.ZP.post(i,a).then((t=>{this.getCartList()}))},removeItem(t){const s=`https://vue3-course-api.hexschool.io/api/jysing-aip/cart/${t}`;e.ZP["delete"](s).then((t=>{this.getCartList()}))},cleanAll(){const t="https://vue3-course-api.hexschool.io/api/jysing-aip/carts";e.ZP["delete"](t).then((t=>{this.getCartList()}))},updateCart(t,s){r.btnStatus=!0;let{id:i,qty:a,product_id:o}=t;!0===s?a+=1:a-=1;const l={product_id:o,qty:a},n=`https://vue3-course-api.hexschool.io/api/jysing-aip/cart/${i}`;e.ZP.put(n,{data:l}).then((t=>{r.btnStatus=!1,this.getCartList()}))}},getters:{getQty(t){return t.cartList.length}}})},7364:function(t,s,i){i.d(s,{Z:function(){return c}});var a=i(3099);const e=["src"];function o(t,s,i,o,r,l){const n=(0,a.up)("LoadingPage");return(0,a.wg)(),(0,a.j4)(n,{active:i.loadStatus,opacity:.9,"background-color":"#fff"},{default:(0,a.w5)((()=>[(0,a._)("img",{src:r.img,alt:"",style:{width:"250px",height:"250px"}},null,8,e)])),_:1},8,["active","opacity"])}var r={props:["loadStatus"],data(){return{img:"./assets/images/pokemon/pika.gif"}}},l=i(5727);const n=(0,l.Z)(r,[["render",o]]);var c=n},8106:function(t,s,i){i.r(s),i.d(s,{default:function(){return V}});var a=i(3099),e=i(8317),o=i(5860);const r={class:"mainProduct"},l={class:"container-lg"},n={class:"mainBox"},c={key:0,class:"row"},d={class:"col-md-7"},u={class:"imgBox"},p=["src"],g={class:"col-md-5"},h={class:"detailBox"},_={class:"orginPrice"},m={class:"addBox"},v={class:"unitBox"},w=(0,a._)("p",null,"-",-1),y=[w],f={class:"unitText"},k=(0,a._)("p",null,"+",-1),C=[k],P=(0,a._)("h5",null,"加入購物車",-1),b=[P],L={key:0,class:"detailText"},x=(0,a._)("h4",null,"商品特色",-1),Z={key:1,class:"mayProduct"},q=(0,a._)("h4",null,"推薦商品",-1),S=["onClick"],j={class:"moreImg"},B=["src","alt"],z=(0,a._)("span",null,"查看更多",-1);function D(t,s,i,w,k,P){const D=(0,a.up)("LoadingImg"),$=(0,a.up)("swiper-slide"),I=(0,a.up)("swiper");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(D,{loadStatus:t.isLoading},null,8,["loadStatus"]),(0,a._)("section",r,[(0,a._)("div",l,[(0,a._)("div",n,[null!==t.product?((0,a.wg)(),(0,a.iD)("div",c,[(0,a._)("div",d,[(0,a._)("div",u,[(0,a._)("img",{src:t.product.imageUrl,alt:"product.title"},null,8,p)])]),(0,a._)("div",g,[(0,a._)("div",h,[(0,a._)("h3",null,(0,e.zw)(t.product.title),1),(0,a._)("div",_,[(0,a._)("p",null,"原價: NT$"+(0,e.zw)(t.product.origin_price),1)]),(0,a._)("h4",null,"特價: NT$"+(0,e.zw)(t.product.price),1)]),(0,a._)("div",m,[(0,a._)("div",v,[(0,a._)("button",(0,a.dG)({type:"button",class:"btn remove"},{disabled:k.product_qty<=1},{onClick:s[0]||(s[0]=(0,o.iM)((t=>P.updateCart(!1)),["prevent"]))}),y,16),(0,a._)("div",f,[(0,a._)("p",null,(0,e.zw)(k.product_qty),1)]),(0,a._)("button",{type:"button",class:"btn add",onClick:s[1]||(s[1]=(0,o.iM)((t=>P.updateCart(!0)),["prevent"]))},C)]),(0,a._)("button",{type:"button",class:"btn btn-primary",onClick:s[2]||(s[2]=(0,o.iM)((s=>t.addCart(t.product.id,k.product_qty)),["prevent"]))},b)])])])):(0,a.kq)("",!0)]),null!==t.product?((0,a.wg)(),(0,a.iD)("div",L,[x,(0,a._)("p",null,(0,e.zw)(t.product.content),1)])):(0,a.kq)("",!0),P.moreProducts.length>=3?((0,a.wg)(),(0,a.iD)("div",Z,[q,(0,a.Wm)(I,{navigation:!0,modules:k.modules,"space-between":10,"slides-per-view":3,loop:!0,breakpoints:{414:{slidesPerView:2,spaceBetween:20},768:{slidesPerView:3,spaceBetween:30}},class:"mySwiper"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(P.moreProducts,(s=>((0,a.wg)(),(0,a.j4)($,{key:s.id},{default:(0,a.w5)((()=>[(0,a._)("div",{class:"imgBox",onClick:(0,o.iM)((i=>t.getProduct(s.id)),["prevent"])},[(0,a._)("div",j,[(0,a._)("img",{src:s.imageUrl,alt:s.title},null,8,B),z]),(0,a._)("p",null,(0,e.zw)(s.title),1)],8,S)])),_:2},1024)))),128))])),_:1},8,["modules"])])):(0,a.kq)("",!0)])])],64)}i(7658);var $=i(7364),I=i(195),M=i(8150),T=i(6311),A=i(5314),N=i(7775),W=i(4334),H={props:["id"],components:{LoadingImg:$.Z,Swiper:I.tq,SwiperSlide:I.o5},data(){return{product_qty:1,modules:[M.W_]}},computed:{...(0,W.rn)(N.Z,["isLoading"]),...(0,W.rn)(T.Z,["product","productsList"]),moreProducts(){const t=this.productsList,s=[];if(null!=this.product){const{category:i,id:a}=this.product;t.forEach((t=>{t.category===i&&t.id!==a&&s.push(t)}))}return s}},methods:{...(0,W.nv)(A.Z,["addCart"]),...(0,W.nv)(T.Z,["getProduct","getAllProducts"]),updateCart(t){!0===t?this.product_qty+=1:this.product_qty-=1}},created(){const{id:t}=this.$route.params;this.getProduct(t),this.getAllProducts()}},Q=i(5727);const U=(0,Q.Z)(H,[["render",D]]);var V=U}}]);
//# sourceMappingURL=106.10e92d66.js.map