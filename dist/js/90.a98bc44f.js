"use strict";(self["webpackChunkjs_shop"]=self["webpackChunkjs_shop"]||[]).push([[90],{5314:function(t,s,a){var e=a(4334),i=a(9554),n=a(7775);const o=(0,n.Z)();s["Z"]=(0,e.Q_)("cartStore",{state:()=>({cartList:[],total:null,final_total:null,totalNum:0}),actions:{getCartList(){const t="https://vue3-course-api.hexschool.io/api/jysing-aip/cart";i.ZP.get(t).then((t=>{this.cartList=t.data.data.carts,this.total=t.data.data.total,this.final_total=t.data.data.final_total}))},addCart(t,s=1){const a="https://vue3-course-api.hexschool.io/api/jysing-aip/cart",e={data:{product_id:t,qty:s}};i.ZP.post(a,e).then((t=>{this.getCartList(),this.hintMessage(!0,"已加入購物車")})).catch((t=>{this.hintMessage(!1,t.message)}))},removeItem(t){const s=`https://vue3-course-api.hexschool.io/api/jysing-aip/cart/${t}`;i.ZP["delete"](s).then((t=>{this.getCartList(),this.hintMessage(!0,"已刪除")})).catch((t=>{this.hintMessage(!1,t.message)}))},cleanAll(){const t="https://vue3-course-api.hexschool.io/api/jysing-aip/carts";i.ZP["delete"](t).then((t=>{this.getCartList(),this.hintMessage(!0,"清空購物車")})).catch((t=>{this.hintMessage(!1,t.message)}))},updateCart(t,s){o.btnStatus=!0;let{id:a,qty:e,product_id:n}=t;!0===s?e+=1:e-=1;const c={product_id:n,qty:e},r=`https://vue3-course-api.hexschool.io/api/jysing-aip/cart/${a}`;i.ZP.put(r,{data:c}).then((t=>{o.btnStatus=!1,this.getCartList()})).catch((t=>{this.hintMessage(!1,t.message)}))},hintMessage(t,s){o.hintStatus.active=!0,o.hintStatus.status=t,o.hintStatus.text=s,setTimeout((()=>{o.hintStatus.active=!1,o.hintStatus.status=!1,o.hintStatus.text=""}),"1000")}},getters:{getQty(t){return t.cartList.length}}})},6311:function(t,s,a){var e=a(4334),i=a(9554),n=a(7775);const o=(0,n.Z)();s["Z"]=(0,e.Q_)("productStore",{state:()=>({productsList:[],product:null}),actions:{getAllProducts(){o.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/jysing-aip/products/all";i.ZP.get(t).then((t=>{this.productsList=t.data.products,o.isLoading=!1}))},getProduct(t){o.isLoading=!0;const s=`https://vue3-course-api.hexschool.io/api/jysing-aip/product/${t}`;i.ZP.get(s).then((t=>{this.product=t.data.product,o.isLoading=!1}))}}})},7775:function(t,s,a){var e=a(4334);s["Z"]=(0,e.Q_)("statusStore",{state:()=>({isLoading:!1,btnStatus:!1,hintStatus:{active:!1,status:!1,text:""}})})},3979:function(t,s,a){a.d(s,{Z:function(){return d}});var e=a(3099),i=a(8317);const n={class:"banner"},o=["src"];function c(t,s,a,c,r,l){return(0,e.wg)(),(0,e.iD)("section",n,[(0,e._)("img",{src:a.banner.img,alt:""},null,8,o),(0,e._)("h2",null,(0,i.zw)(a.banner.title),1)])}var r={props:["banner"]},l=a(5727);const u=(0,l.Z)(r,[["render",c]]);var d=u},3118:function(t,s,a){a.d(s,{Z:function(){return g}});var e=a(3099),i=a(8317);const n={key:0,class:"imgBox"},o=["src"],c={key:1,class:"imgBox"},r=["src"];function l(t,s,a,l,u,d){return(0,e.wg)(),(0,e.iD)("div",{class:(0,i.C_)(["hintBox",{active:a.isHint.active}])},[a.isHint.status?((0,e.wg)(),(0,e.iD)("div",n,[(0,e._)("img",{src:u.success,alt:""},null,8,o)])):((0,e.wg)(),(0,e.iD)("div",c,[(0,e._)("img",{src:u.error,alt:""},null,8,r)])),(0,e._)("p",{class:(0,i.C_)({error:!a.isHint.status})},(0,i.zw)(a.isHint.text),3)],2)}var u={props:["isHint"],data(){return{success:"./assets/images/icon/checked.png",error:"./assets/images/icon/cancel.png"}}},d=a(5727);const p=(0,d.Z)(u,[["render",l]]);var g=p},7364:function(t,s,a){a.d(s,{Z:function(){return l}});var e=a(3099);const i=["src"];function n(t,s,a,n,o,c){const r=(0,e.up)("LoadingPage");return(0,e.wg)(),(0,e.j4)(r,{active:a.loadStatus,opacity:.9,"background-color":"#fff"},{default:(0,e.w5)((()=>[(0,e._)("img",{src:o.img,alt:"",style:{width:"250px",height:"250px"}},null,8,i)])),_:1},8,["active","opacity"])}var o={props:["loadStatus"],data(){return{img:"./assets/images/pokemon/pika.gif"}}},c=a(5727);const r=(0,c.Z)(o,[["render",n]]);var l=r},3981:function(t,s,a){a.d(s,{Z:function(){return h}});var e=a(3099),i=a(8317),n=a(5860);const o={key:0,class:"pagination",id:"pageid"},c=["data-page"],r=["data-page","onClick"],l=["data-page"];function u(t,s,a,u,d,p){return 0!==a.num?((0,e.wg)(),(0,e.iD)("ul",o,[(0,e._)("li",{class:(0,i.C_)(["page-item",{disabled:!p.hasPage}])},[(0,e._)("a",{class:"page-link",href:"#","data-page":a.nowPage-1,onClick:s[0]||(s[0]=(0,n.iM)((t=>p.pageChange(a.nowPage-1)),["prevent"]))}," 上一頁 ",8,c)],2),((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(a.num,(t=>((0,e.wg)(),(0,e.iD)("li",{class:(0,i.C_)(["page-item",{active:t===a.nowPage}]),key:t},[(0,e._)("a",{class:"page-link",href:"#","data-page":t,onClick:(0,n.iM)((s=>p.pageChange(t)),["prevent"])},(0,i.zw)(t),9,r)],2)))),128)),(0,e._)("li",{class:(0,i.C_)(["page-item",{disabled:!p.hasNext}])},[(0,e._)("a",{class:"page-link",href:"#","data-page":a.nowPage+1,onClick:s[1]||(s[1]=(0,n.iM)((t=>p.pageChange(a.nowPage+1)),["prevent"]))}," 下一頁 ",8,l)],2)])):(0,e.kq)("",!0)}var d={props:["num","nowPage"],methods:{pageChange(t){this.$emit("newpage",t),window.scrollTo({top:0,left:0,behavior:"smooth"})}},computed:{hasPage(){return this.nowPage>1},hasNext(){return this.nowPage<this.num}}},p=a(5727);const g=(0,p.Z)(d,[["render",u]]);var h=g},9090:function(t,s,a){a.r(s),a.d(s,{default:function(){return K}});var e=a(3099),i=a(5860),n=a(8317);const o={class:"mainList"},c={class:"container-md"},r={class:"row keywordBox"},l={class:"input-group"},u={class:"row"},d={class:"col-md-3"},p={class:"typeList"},g=["onClick"],h={class:"col-md-9"},v={class:"row listBox"},m=["onClick"],_={class:"imgBox"},w=["src"],y={class:"card-body"},k={class:"textBox"},C={class:"card-title"},f={class:"origin"},L={class:"btnBox"},b=["onClick"],x=(0,e._)("p",null,"加入購物車",-1),P=[x],Z={key:0,class:"col-md-4"},D=(0,e._)("div",{class:"emptyCard"},[(0,e._)("h5",{class:"card-title"},"沒有商品"),(0,e._)("p",{class:"card-text"},[(0,e.Uk)(" 暫時沒有搜尋的商品"),(0,e._)("br"),(0,e.Uk)("請重新搜尋 ")])],-1),S=[D],M={key:0,class:"row"},H={class:"col-md-12"};function j(t,s,a,x,D,j){const B=(0,e.up)("LoadingImg"),T=(0,e.up)("BannerImg"),$=(0,e.up)("HintCard"),I=(0,e.up)("UserPageList");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e.Wm)(B,{loadStatus:t.isLoading},null,8,["loadStatus"]),(0,e.Wm)(T,{banner:D.bannerDetail},null,8,["banner"]),(0,e.Wm)($,{isHint:t.hintStatus},null,8,["isHint"]),(0,e._)("section",o,[(0,e._)("div",c,[(0,e._)("div",r,[(0,e._)("div",l,[(0,e.wy)((0,e._)("input",{type:"text",class:"form-control",placeholder:"關鍵字搜尋","onUpdate:modelValue":s[0]||(s[0]=t=>D.keyword=t)},null,512),[[i.nr,D.keyword]]),(0,e._)("button",{class:"btn btn-search",type:"button",onClick:s[1]||(s[1]=(0,i.iM)((t=>j.search(!0)),["prevent"]))}," 搜尋 "),(0,e._)("button",{class:"btn btn-clean",type:"button",onClick:s[2]||(s[2]=(0,i.iM)((t=>j.search(!1)),["prevent"]))}," 清除 ")])]),(0,e._)("div",u,[(0,e._)("div",d,[(0,e._)("ul",p,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(D.typeList,((t,s)=>((0,e.wg)(),(0,e.iD)("li",{key:s,class:(0,n.C_)({active:t.id==D.searchList.type}),onClick:(0,i.iM)((s=>j.chooseItem(t.id)),["prevent"])},[(0,e._)("h5",null,(0,n.zw)(t.text),1)],10,g)))),128))])]),(0,e._)("div",h,[(0,e._)("div",v,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(j.pageDetail,(s=>((0,e.wg)(),(0,e.iD)("div",{class:"col-sm-6 col-lg-4 listlayout",key:s.id},[(0,e._)("div",{class:"card",onClick:(0,i.iM)((t=>j.getProductDetail(s.id)),["prevent"])},[(0,e._)("div",_,[(0,e._)("img",{src:s.imageUrl,class:"card-img-top",alt:""},null,8,w)]),(0,e._)("div",y,[(0,e._)("div",k,[(0,e._)("h5",C,(0,n.zw)(s.title),1),(0,e._)("p",f,"原價NT$ "+(0,n.zw)(s.origin_price),1),(0,e._)("p",null,"特價NT$ "+(0,n.zw)(s.price),1)]),(0,e._)("div",L,[(0,e._)("button",{type:"button",class:"btn btn-addCart",onClick:(0,i.iM)((a=>t.addCart(s.id)),["stop"])},P,8,b)])])],8,m)])))),128)),0==D.typeProducts.length?((0,e.wg)(),(0,e.iD)("div",Z,S)):(0,e.kq)("",!0)]),D.pageTotal>1?((0,e.wg)(),(0,e.iD)("div",M,[(0,e._)("div",H,[(0,e.Wm)(I,{num:D.pageTotal,"now-Page":D.page,onNewpage:j.resetPage},null,8,["num","now-Page","onNewpage"])])])):(0,e.kq)("",!0)])])])])],64)}a(7658);var B=a(3981),T=a(7364),$=a(3979),I=a(3118),z=a(645),N=a(6311),q=a(7775),U=a(5314),Q=a(4334);(0,z.QI)({title:"寶可夢商店"});var A={props:["id"],components:{UserPageList:B.Z,LoadingImg:T.Z,BannerImg:$.Z,HintCard:I.Z},data(){return{bannerDetail:{title:"商品列表",img:"./assets/images/banner/banner2.jpg"},typeList:[{id:"all",text:"全部商品"},{id:"hot",text:"潮流專區"},{id:"joint",text:"最新聯名"},{id:"Tshirt",text:"運動用品"},{id:"sunscreen",text:"防曬系列"},{id:"3C",text:"3C行動裝置"},{id:"phoneCase",text:"寶可夢手機殼"}],keyword:null,searchList:{products:[],word:null,type:null},typeProducts:[],page:null,pageTotal:0,perpage:12}},methods:{...(0,Q.nv)(N.Z,["getAllProducts"]),...(0,Q.nv)(U.Z,["addCart"]),calc(t){const s=this.perpage;this.pageTotal=Math.ceil(t/s)},resetPage(t){this.page=t},getProductDetail(t){this.$router.push(`/product/${t}`)},chooseItem(t){this.searchList.type=t},search(t){!0===t?this.searchList.word=this.keyword:(this.searchList.word=null,this.keyword=null)}},watch:{productsList(t){this.searchList.products=t},searchList:{handler(t){const s=t.type,a=[],e=t.word,i=t.products;let n=null;i.forEach((t=>{("all"===s||t.category===s)&&a.push(t)})),n=null!==e?a.filter((t=>t.title.match(e))):a,this.calc(n.length),this.typeProducts=n,this.page=1},deep:!0}},computed:{...(0,Q.rn)(q.Z,["isLoading","hintStatus"]),...(0,Q.rn)(N.Z,["productsList"]),pageDetail(){const t=this.pageTotal,s=this.perpage;let a=this.page;a>t&&(a=t);const e=a*s-s+1,i=a*s,n=[];return this.typeProducts.forEach(((t,s)=>{const a=s+1;a>=e&&a<=i&&n.push(t)})),n}},created(){this.searchList.type=this.$route.params.id,this.getAllProducts()}},W=a(5727);const Y=(0,W.Z)(A,[["render",j]]);var K=Y}}]);
//# sourceMappingURL=90.a98bc44f.js.map