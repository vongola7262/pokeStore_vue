"use strict";(self["webpackChunkjs_shop"]=self["webpackChunkjs_shop"]||[]).push([[166],{5314:function(e,t,s){var a=s(4334),l=s(9554),i=s(7775);const u=(0,i.Z)();t["Z"]=(0,a.Q_)("cartStore",{state:()=>({cartList:[],total:null,final_total:null,totalNum:0}),actions:{getCartList(){const e="https://vue3-course-api.hexschool.io/api/jysing-aip/cart";l.ZP.get(e).then((e=>{this.cartList=e.data.data.carts,this.total=e.data.data.total,this.final_total=e.data.data.final_total}))},addCart(e,t=1){const s="https://vue3-course-api.hexschool.io/api/jysing-aip/cart",a={data:{product_id:e,qty:t}};l.ZP.post(s,a).then((e=>{this.getCartList(),this.hintMessage(!0,"已加入購物車")})).catch((e=>{this.hintMessage(!1,e.message)}))},removeItem(e){const t=`https://vue3-course-api.hexschool.io/api/jysing-aip/cart/${e}`;l.ZP["delete"](t).then((e=>{this.getCartList(),this.hintMessage(!0,"已刪除")})).catch((e=>{this.hintMessage(!1,e.message)}))},cleanAll(){const e="https://vue3-course-api.hexschool.io/api/jysing-aip/carts";l.ZP["delete"](e).then((e=>{this.getCartList(),this.hintMessage(!0,"清空購物車")})).catch((e=>{this.hintMessage(!1,e.message)}))},updateCart(e,t){u.btnStatus=!0;let{id:s,qty:a,product_id:i}=e;!0===t?a+=1:a-=1;const r={product_id:i,qty:a},o=`https://vue3-course-api.hexschool.io/api/jysing-aip/cart/${s}`;l.ZP.put(o,{data:r}).then((e=>{u.btnStatus=!1,this.getCartList()})).catch((e=>{this.hintMessage(!1,e.message)}))},hintMessage(e,t){u.hintStatus.active=!0,u.hintStatus.status=e,u.hintStatus.text=t,setTimeout((()=>{u.hintStatus.active=!1,u.hintStatus.status=!1,u.hintStatus.text=""}),"1000")}},getters:{getQty(e){return e.cartList.length}}})},7775:function(e,t,s){var a=s(4334);t["Z"]=(0,a.Q_)("statusStore",{state:()=>({isLoading:!1,btnStatus:!1,hintStatus:{active:!1,status:!1,text:""}})})},5166:function(e,t,s){s.r(t),s.d(t,{default:function(){return H}});var a=s(3099);const l={class:"mainForm"},i=(0,a._)("div",{class:"titleBox"},[(0,a._)("h2",null,"收件資訊"),(0,a._)("h4",null,"以便我們盡快安排出貨")],-1),u={class:"formMain"},r={class:"inputGroup nameGroup"},o={class:"textBox"},n=(0,a._)("label",{for:"userName"},[(0,a._)("h5",null,"姓名")],-1),m={class:"group"},d={class:"inputGroup"},c={class:"textBox"},h=(0,a._)("label",{for:"userPhone"},[(0,a._)("h5",null,"電話")],-1),p={class:"inputGroup"},_={class:"textBox"},g=(0,a._)("label",{for:"userEmail"},[(0,a._)("h5",null,"Email")],-1),v={class:"inputGroup"},x={class:"textBox"},f=(0,a._)("label",{for:"userAddress"},[(0,a._)("h5",null,"地址")],-1),V={class:"inputGroup"},y={class:"textBox"},b=(0,a._)("h5",null,"方便收件時段",-1),T={class:"timeList"},S={class:"radiolist"},W=(0,a._)("label",{for:"morning"},[(0,a._)("h6",null,"8:00 ~ 12:00")],-1),B={class:"radiolist"},C=(0,a._)("label",{for:"night"},[(0,a._)("h6",null,"13:00 ~ 17:00")],-1),q={class:"radiolist"},L=(0,a._)("label",{for:"else"},[(0,a._)("h6",null,"18:00 ~ 21:00")],-1),M={class:"inputGroup"},E={class:"textBox"},P=(0,a._)("label",{for:"userText"},[(0,a._)("h5",null,"注意事項")],-1),Z=(0,a._)("div",{class:"buttonBox"},[(0,a._)("button",{type:"submit",class:"nextBtn"},[(0,a._)("h5",null,"確認資訊")])],-1);function j(e,t,s,j,N,U){const k=(0,a.up)("ErrorMessage"),G=(0,a.up)("Field"),A=(0,a.up)("Form");return(0,a.wg)(),(0,a.iD)("section",l,[(0,a.Wm)(A,{onSubmit:U.onS},{default:(0,a.w5)((()=>[i,(0,a._)("div",u,[(0,a._)("div",r,[(0,a._)("div",o,[n,(0,a.Wm)(k,{name:"userName"})]),(0,a.Wm)(G,{type:"text",name:"userName",id:"userName",placeholder:"請輸入姓名",autocomplete:"off",rules:{required:!0},modelValue:N.user.name,"onUpdate:modelValue":t[0]||(t[0]=e=>N.user.name=e)},null,8,["modelValue"])]),(0,a._)("div",m,[(0,a._)("div",d,[(0,a._)("div",c,[h,(0,a.Wm)(k,{name:"userPhone"})]),(0,a.Wm)(G,{type:"tel",name:"userPhone",id:"userPhone",placeholder:"請輸入電話",autocomplete:"off",rules:{required:!0,numeric:!0,length:10},modelValue:N.user.tel,"onUpdate:modelValue":t[1]||(t[1]=e=>N.user.tel=e)},null,8,["modelValue"])]),(0,a._)("div",p,[(0,a._)("div",_,[g,(0,a.Wm)(k,{name:"userEmail"})]),(0,a.Wm)(G,{type:"email",name:"userEmail",id:"userEmail",placeholder:"請輸入Email",autocomplete:"off",rules:{email:!0,required:!0},modelValue:N.user.email,"onUpdate:modelValue":t[2]||(t[2]=e=>N.user.email=e)},null,8,["modelValue"])])]),(0,a._)("div",v,[(0,a._)("div",x,[f,(0,a.Wm)(k,{name:"userAddress"})]),(0,a.Wm)(G,{type:"text",name:"userAddress",id:"userAddress",placeholder:"請輸入地址",autocomplete:"off",rules:{required:!0},modelValue:N.user.address,"onUpdate:modelValue":t[3]||(t[3]=e=>N.user.address=e)},null,8,["modelValue"])]),(0,a._)("div",V,[(0,a._)("div",y,[b,(0,a.Wm)(k,{name:"meetTime"})]),(0,a._)("div",T,[(0,a._)("div",S,[(0,a.Wm)(G,{type:"radio",name:"meetTime",id:"morning",value:"1",modelValue:N.user.meetTime,"onUpdate:modelValue":t[4]||(t[4]=e=>N.user.meetTime=e),class:"radioBox",rules:{required:!0}},null,8,["modelValue"]),W]),(0,a._)("div",B,[(0,a.Wm)(G,{type:"radio",name:"meetTime",id:"night",value:"2",modelValue:N.user.meetTime,"onUpdate:modelValue":t[5]||(t[5]=e=>N.user.meetTime=e),class:"radioBox",rules:{required:!0}},null,8,["modelValue"]),C]),(0,a._)("div",q,[(0,a.Wm)(G,{type:"radio",name:"meetTime",id:"else",value:"3",modelValue:N.user.meetTime,"onUpdate:modelValue":t[6]||(t[6]=e=>N.user.meetTime=e),class:"radioBox",rules:{required:!0}},null,8,["modelValue"]),L])])]),(0,a._)("div",M,[(0,a._)("div",E,[P,(0,a.Wm)(k,{name:"userText"})]),(0,a.Wm)(G,{as:"textarea",rows:"4",type:"text",name:"userText",id:"userText",modelValue:N.messages,"onUpdate:modelValue":t[7]||(t[7]=e=>N.messages=e),autocomplete:"off"},null,8,["modelValue"])])]),Z])),_:1},8,["onSubmit"])])}s(7658);var N=s(5314),U=s(4334),k=s(1770),G=s(6120),A=s(6910),$=s(645);(0,k.aH)("required",G.C1),(0,k.aH)("email",G.Do),(0,k.aH)("length",G.kE),(0,k.aH)("numeric",G.uR),(0,$.QI)({title:"購物車"}),(0,k.jQ)({generateMessage:(0,A.NC)("zh-TW",{messages:{required:"請填寫{field}",email:"請填寫正確格式",length:"請填寫正確格式 ( 10碼 )",numeric:"只能填數字"},names:{userName:"姓名",userPhone:"電話",userEmail:"Email",meetTime:"時段",userAddress:"地址"}})});var w={components:{Form:k.l0,Field:k.gN,ErrorMessage:k.Bc},data(){return{user:{name:null,email:null,tel:null,address:null,meetTime:null},messages:null}},methods:{...(0,U.nv)(N.Z,["getCartList"]),onS(){const e="https://vue3-course-api.hexschool.io/api/jysing-aip/order",t={user:this.user,message:this.messages};this.axios.post(e,{data:t}).then((e=>{const t=e.data.orderId;!0===e.data.success?(this.$router.push(`/order/checkout/${t}`),this.getCartList()):this.$router.push(`/order/checkout/${t}`)}))}}},F=s(5727);const Q=(0,F.Z)(w,[["render",j]]);var H=Q}}]);
//# sourceMappingURL=166.c8cfba03.js.map