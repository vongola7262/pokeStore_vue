{"version":3,"file":"js/570.8788b66b.js","mappings":"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","sources":["webpack://js-shop/./src/views/admin/VoucherList.vue","webpack://js-shop/./src/components/VoucherMenu.vue","webpack://js-shop/./src/components/VoucherMenu.vue?f7e2","webpack://js-shop/./src/views/admin/VoucherList.vue?fe7a"],"sourcesContent":["<template>\r\n  <LoadingPage :active=\"isLoading\"></LoadingPage>\r\n  <div>\r\n    <LoadingPage :active=\"isLoading\"></LoadingPage>\r\n    <div class=\"text-end mt-4\">\r\n      <button class=\"btn btn-primary\" @click.prevent=\"openMenu(false)\">\r\n        建立新的優惠券\r\n      </button>\r\n    </div>\r\n    <table class=\"table mt-4\">\r\n      <thead>\r\n      <tr>\r\n        <th>名稱</th>\r\n        <th>折扣百分比</th>\r\n        <th>到期日</th>\r\n        <th>是否啟用</th>\r\n        <th>編輯</th>\r\n      </tr>\r\n      </thead>\r\n      <tbody>\r\n      <tr v-for=\"(item, key) in vocList\" :key=\"key\">\r\n        <td>{{ item.title }}</td>\r\n        <td>{{ item.percent }}%</td>\r\n        <td>{{ $filterdate.date(item.due_date) }}</td>\r\n        <td>\r\n          <span v-if=\"item.is_enabled === 1\" class=\"text-success\">啟用</span>\r\n          <span v-else class=\"text-muted\">未起用</span>\r\n        </td>\r\n        <td>\r\n          <div class=\"btn-group\">\r\n            <button class=\"btn btn-outline-primary btn-sm\"\r\n            @click.prevent=\"openMenu(true,item)\"\r\n            >編輯</button>\r\n            <button class=\"btn btn-outline-danger btn-sm\"\r\n            @click.prevent=\"deleteItem(item)\"\r\n            >刪除</button>\r\n          </div>\r\n        </td>\r\n      </tr>\r\n      </tbody>\r\n    </table>\r\n    <PageList :pages=\"pages\" @nextpage=\"getOrder\"></PageList>\r\n    <Modal ref=\"vcModal\" :voucher=\"tempProducts\" @update-coupon=\"sendItem\"></Modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Modal from '@/components/VoucherMenu.vue'\r\nimport PageList from '@/components/PageList.vue'\r\n\r\nexport default {\r\n  components: {\r\n    Modal,\r\n    PageList\r\n  },\r\n  data () {\r\n    return {\r\n      vocList: [],\r\n      pages: {},\r\n      tempProducts: {},\r\n      isNew: false,\r\n      isLoading: false\r\n    }\r\n  },\r\n  inject: ['emitter'],\r\n  methods: {\r\n    getOrder (page = 1) {\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupons/?page=${page}`\r\n      this.isLoading = true\r\n      this.axios.get(api).then(res => {\r\n        this.isLoading = false\r\n        this.vocList = res.data.coupons\r\n        this.pages = res.data.pagination\r\n      })\r\n    },\r\n    openMenu (isNew, item) {\r\n      if (!isNew) {\r\n        this.tempProducts = {}\r\n      } else {\r\n        this.tempProducts = { ...item }\r\n      }\r\n      this.isNew = isNew\r\n      this.$refs.vcModal.showModal()\r\n    },\r\n    sendItem (item) {\r\n      this.tempProducts = item\r\n      console.log(item)\r\n      let api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupon`\r\n      let send = 'post'\r\n      if (this.isNew) {\r\n        api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupon/${item.id}`\r\n        send = 'put'\r\n      }\r\n      this.isLoading = true\r\n      this.axios({\r\n        method: send,\r\n        url: api,\r\n        data: { data: this.tempProducts }\r\n      }).then(res => {\r\n        this.isLoading = false\r\n        this.$refs.vcModal.hiddenModal()\r\n        if (res.data.success) {\r\n          this.getOrder()\r\n          this.emitter.emit('push-message', {\r\n            style: 'success',\r\n            title: '更新成功',\r\n            content: '優惠券已更新'\r\n          })\r\n        } else {\r\n          this.emitter.emit('push-message', {\r\n            style: 'danger',\r\n            title: '更新失敗',\r\n            content: res.data.message.join(',')\r\n          })\r\n        }\r\n      })\r\n    },\r\n    deleteItem (item) {\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupon/${item.id}`\r\n      this.isLoading = true\r\n      this.axios.delete(api, item.id).then((res) => {\r\n        this.isLoading = false\r\n        this.getOrder()\r\n      })\r\n    }\r\n  },\r\n  created () {\r\n    this.getOrder()\r\n  }\r\n}\r\n</script>\r\n","<template>\r\n  <div\r\n    class=\"modal fade\"\r\n    id=\"couponModal\"\r\n    tabindex=\"-1\"\r\n    role=\"dialog\"\r\n    aria-labelledby=\"exampleModalLabel\"\r\n    aria-hidden=\"true\"\r\n    ref=\"modal\"\r\n  >\r\n    <div class=\"modal-dialog\" role=\"document\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header\">\r\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">新增優惠券</h5>\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn-close\"\r\n            data-bs-dismiss=\"modal\"\r\n            aria-label=\"Close\"\r\n          ></button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <div class=\"mb-3\">\r\n            <label for=\"title\">標題</label>\r\n            <input\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              id=\"title\"\r\n              v-model=\"tempCoupon.title\"\r\n              placeholder=\"請輸入標題\"\r\n            />\r\n          </div>\r\n          <div class=\"mb-3\">\r\n            <label for=\"coupon_code\">優惠碼</label>\r\n            <input\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              id=\"coupon_code\"\r\n              v-model=\"tempCoupon.code\"\r\n              placeholder=\"請輸入優惠碼\"\r\n            />\r\n          </div>\r\n          <div class=\"mb-3\">\r\n            <label for=\"due_date\">到期日</label>\r\n            <input\r\n              type=\"date\"\r\n              class=\"form-control\"\r\n              id=\"due_date\"\r\n              v-model=\"due_date\"\r\n            />\r\n          </div>\r\n          <div class=\"mb-3\">\r\n            <label for=\"price\">折扣百分比</label>\r\n            <input\r\n              type=\"number\"\r\n              class=\"form-control\"\r\n              id=\"price\"\r\n              v-model.number=\"tempCoupon.percent\"\r\n              placeholder=\"請輸入折扣百分比\"\r\n            />\r\n          </div>\r\n          <div class=\"mb-3\">\r\n            <div class=\"form-check\">\r\n              <input\r\n                class=\"form-check-input\"\r\n                type=\"checkbox\"\r\n                :true-value=\"1\"\r\n                :false-value=\"0\"\r\n                v-model=\"tempCoupon.is_enabled\"\r\n                id=\"is_enabled\"\r\n              />\r\n              <label class=\"form-check-label\" for=\"is_enabled\">\r\n                是否啟用\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn btn-secondary\"\r\n            data-bs-dismiss=\"modal\"\r\n          >\r\n            Close\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn btn-primary\"\r\n            @click=\"$emit('update-coupon', tempCoupon)\"\r\n          >\r\n            更新優惠券\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Modal from 'bootstrap/js/dist/modal'\r\n\r\nexport default {\r\n  name: 'myModal',\r\n  props: {\r\n    voucher: {\r\n      type: Object,\r\n      default () {\r\n        return {}\r\n      }\r\n    }\r\n  },\r\n  emits: ['update-coupon'],\r\n  data () {\r\n    return {\r\n      myModal: {},\r\n      tempCoupon: {},\r\n      due_date: ''\r\n    }\r\n  },\r\n  watch: {\r\n    voucher (n) {\r\n      this.tempCoupon = n\r\n      if (n.due_date) {\r\n        const dateAndTime = new Date(n.due_date * 1000)\r\n          .toISOString().split('T')\r\n        this.due_date = dateAndTime[0]\r\n      } else {\r\n        this.due_date = ''\r\n      }\r\n    },\r\n    due_date (n) {\r\n      this.tempCoupon.due_date = Math.floor(new Date(n) / 1000)\r\n    }\r\n  },\r\n  methods: {\r\n    showModal () {\r\n      this.myModal.show()\r\n    },\r\n    hiddenModal () {\r\n      this.myModal.hide()\r\n    }\r\n  },\r\n  mounted () {\r\n    this.myModal = new Modal(this.$refs.modal)\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./VoucherMenu.vue?vue&type=template&id=1e8e4899\"\nimport script from \"./VoucherMenu.vue?vue&type=script&lang=js\"\nexport * from \"./VoucherMenu.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\user007\\\\Desktop\\\\project\\\\js-shop\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./VoucherList.vue?vue&type=template&id=caae1c84\"\nimport script from \"./VoucherList.vue?vue&type=script&lang=js\"\nexport * from \"./VoucherList.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\user007\\\\Desktop\\\\project\\\\js-shop\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createVNode","_component_LoadingPage","active","$data","_hoisted_1","onClick","$options","_hoisted_2","_hoisted_3","_createElementBlock","_Fragment","item","key","title","percent","_ctx","date","due_date","is_enabled","_hoisted_4","_hoisted_5","_hoisted_6","_component_PageList","pages","onNextpage","_component_Modal","ref","voucher","onUpdateCoupon","id","tabindex","role","type","for","_hoisted_7","placeholder","_hoisted_8","_hoisted_9","code","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","name","props","Object","default","emits","data","myModal","tempCoupon","watch","n","this","dateAndTime","Date","toISOString","split","Math","floor","methods","showModal","show","hiddenModal","hide","mounted","Modal","$refs","modal","__exports__","components","PageList","vocList","tempProducts","isNew","isLoading","inject","getOrder","page","api","axios","get","then","res","coupons","pagination","openMenu","vcModal","sendItem","console","log","send","method","url","success","emitter","emit","style","content","message","join","deleteItem","delete","created","render"],"sourceRoot":""}