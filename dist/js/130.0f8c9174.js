"use strict";(self["webpackChunkjs_shop"]=self["webpackChunkjs_shop"]||[]).push([[130],{7364:function(t,e,l){l.d(e,{Z:function(){return u}});var a=l(3099);const s=["src"];function i(t,e,l,i,n,o){const c=(0,a.up)("LoadingPage");return(0,a.wg)(),(0,a.j4)(c,{active:l.loadStatus,opacity:.9,"background-color":"#fff"},{default:(0,a.w5)((()=>[(0,a._)("img",{src:n.img,alt:"",style:{width:"250px",height:"250px"}},null,8,s)])),_:1},8,["active","opacity"])}var n={props:["loadStatus"],data(){return{img:"./assets/images/pokemon/pika.gif"}}},o=l(5727);const c=(0,o.Z)(n,[["render",i]]);var u=c},9130:function(t,e,l){l.r(e),l.d(e,{default:function(){return nt}});var a=l(3099),s=l(5860),i=l(8317);const n={class:"mainCartList"},o={class:"container-lg"},c={key:0,class:"emptyText"},u=(0,a._)("h3",null,"目前購物車是空的!",-1),r=(0,a._)("h4",null,"前往商店 GO",-1),d=[r],p={key:1,class:"row"},_={class:"col-md-8"},h={class:"cartList"},v={class:"cart-list-group"},g={class:"cartImageBox"},C={class:"imgBox"},b=["src","alt"],m={class:"cartDetailList"},y={key:0,class:"finalPrice"},w={class:"orginPrice"},x={key:1,class:"finalPrice"},f=["onClick"],k={class:"unitBox"},L=["onClick"],S=(0,a._)("p",null,"-",-1),M=[S],D={class:"unitText"},z=["onClick"],j=(0,a._)("p",null,"+",-1),B=[j],q={class:"cleanBtn"},I=(0,a._)("p",null,"全部清空",-1),$=[I],P={class:"col-md-4"},Z={class:"paymentDeatil"},A={class:"titleBox"},G=(0,a._)("h3",null,"購物車資訊",-1),T={class:"inputCode input-group"},H={key:0,class:"errorCode"},U=(0,a._)("p",null,"套用",-1),Y=[U],K={class:"table"},N=(0,a._)("th",null,[(0,a._)("p",null,"小計")],-1),O={class:"text-end"},V=(0,a._)("th",null,[(0,a._)("p",null,"折價")],-1),W={class:"text-end"},E=(0,a._)("tr",null,[(0,a._)("th",null,[(0,a._)("p",null,"運費")]),(0,a._)("td",{class:"text-end"},[(0,a._)("p",null,"0")])],-1),F={colspan:"2",class:"text-end"},J={class:"nextStepBox"},Q=(0,a._)("p",null,"繼續購物",-1),R=[Q],X=(0,a._)("p",null,"下一步",-1),tt=[X];function et(t,e,l,r,S,j){const I=(0,a.up)("LoadingImg");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(I,{loadStatus:S.isLoading},null,8,["loadStatus"]),(0,a._)("section",n,[(0,a._)("div",o,[0==S.cartList.length?((0,a.wg)(),(0,a.iD)("div",c,[u,(0,a._)("a",{href:"#",class:"viewMore",onClick:e[0]||(e[0]=(0,s.iM)(((...t)=>j.viewMore&&j.viewMore(...t)),["prevent"]))},d)])):((0,a.wg)(),(0,a.iD)("div",p,[(0,a._)("div",_,[(0,a._)("div",h,[(0,a._)("ul",v,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(S.cartList,(t=>((0,a.wg)(),(0,a.iD)("li",{class:"list-group-item",key:t.id},[(0,a._)("div",g,[(0,a._)("div",C,[(0,a._)("img",{src:t.product.imageUrl,alt:t.product.title},null,8,b)])]),(0,a._)("div",m,[(0,a._)("h6",null,(0,i.zw)(t.product.title),1),t.coupon?((0,a.wg)(),(0,a.iD)("div",y,[(0,a._)("h5",null," 優惠價 : "+(0,i.zw)(t.final_total),1),(0,a._)("div",w,[(0,a._)("p",null,"原價 : "+(0,i.zw)(t.total),1)])])):((0,a.wg)(),(0,a.iD)("div",x,[(0,a._)("h5",null," 特價 : "+(0,i.zw)(t.final_total),1)])),(0,a._)("a",{href:"",class:"removeBtn",onClick:(0,s.iM)((e=>j.removeItem(t.id)),["prevent"])},null,8,f),(0,a._)("div",k,[(0,a._)("button",(0,a.dG)({type:"button",class:"btn remove"},{disabled:t.qty<=1||S.btnStatus},{onClick:(0,s.iM)((e=>j.updateCart(t,!1)),["prevent"])}),M,16,L),(0,a._)("div",D,[(0,a._)("p",null,(0,i.zw)(t.qty),1)]),(0,a._)("button",(0,a.dG)({type:"button",class:"btn add"},{disabled:S.btnStatus},{onClick:(0,s.iM)((e=>j.updateCart(t,!0)),["prevent"])}),B,16,z)])])])))),128))]),(0,a._)("div",q,[(0,a._)("button",{type:"button",class:"btn",onClick:e[1]||(e[1]=(0,s.iM)(((...t)=>j.cleanAll&&j.cleanAll(...t)),["prevent"]))},$)])])]),(0,a._)("div",P,[(0,a._)("div",Z,[(0,a._)("div",A,[G,(0,a._)("div",T,[""!==S.enterCodeStatus?((0,a.wg)(),(0,a.iD)("p",H,(0,i.zw)(S.enterCodeStatus),1)):(0,a.kq)("",!0),(0,a.wy)((0,a._)("input",{type:"text",placeholder:"輸入優惠碼","onUpdate:modelValue":e[2]||(e[2]=t=>S.Code=t)},null,512),[[s.nr,S.Code]]),(0,a._)("button",{type:"button",class:"btn btn-primary",onClick:e[3]||(e[3]=(0,s.iM)(((...t)=>j.enterCode&&j.enterCode(...t)),["prevent"]))},Y)])]),(0,a._)("table",K,[(0,a._)("tbody",null,[(0,a._)("tr",null,[N,(0,a._)("td",O,[(0,a._)("p",null,(0,i.zw)(S.total),1)])]),(0,a._)("tr",null,[V,(0,a._)("td",W,[(0,a._)("p",null,(0,i.zw)(S.final_total-S.total),1)])]),E]),(0,a._)("tfoot",null,[(0,a._)("tr",null,[(0,a._)("td",F,[(0,a._)("h4",null,"總計: NT$"+(0,i.zw)(S.final_total),1)])])])]),(0,a._)("div",J,[(0,a._)("button",{type:"button",class:"btn shop",onClick:e[4]||(e[4]=(0,s.iM)(((...t)=>j.viewMore&&j.viewMore(...t)),["prevent"]))},R),(0,a._)("button",{type:"button",class:"btn nextStep",onClick:e[5]||(e[5]=(0,s.iM)(((...t)=>j.nextStep&&j.nextStep(...t)),["prevent"]))},tt)])])])]))])])],64)}l(7658);var lt=l(7364),at={components:{LoadingImg:lt.Z},data(){return{cartList:[],total:null,final_total:null,Code:null,isLoading:!1,btnStatus:!1,enterCodeStatus:""}},methods:{getCartList(){const t="https://vue3-course-api.hexschool.io/api/jysing-aip/cart";this.isLoading=!0,this.axios.get(t).then((t=>{this.cartList=t.data.data.carts,this.total=t.data.data.total,this.final_total=t.data.data.final_total,this.isLoading=!1}))},updateCart(t,e){this.btnStatus=!0;let{id:l,qty:a,product_id:s}=t;!0===e?a+=1:a-=1;const i={product_id:s,qty:a},n=`https://vue3-course-api.hexschool.io/api/jysing-aip/cart/${l}`;this.axios.put(n,{data:i}).then((t=>{this.btnStatus=!1,this.getCartList()}))},removeItem(t){const e=`https://vue3-course-api.hexschool.io/api/jysing-aip/cart/${t}`;this.axios.delete(e).then((t=>{this.getCartList()}))},cleanAll(){const t="https://vue3-course-api.hexschool.io/api/jysing-aip/carts";this.axios.delete(t).then((t=>{this.getCartList()}))},enterCode(){const t="https://vue3-course-api.hexschool.io/api/jysing-aip/coupon",e={code:this.Code};this.axios.post(t,{data:e}).then((t=>{!0===t.data.success?(this.getCartList(),this.enterCodeStatus=""):(this.enterCodeStatus=t.data.message,this.Code=null)}))},nextStep(){this.$router.push({name:"cartform"})},viewMore(){this.$router.push("/typeList/all")}},created(){this.getCartList()}},st=l(5727);const it=(0,st.Z)(at,[["render",et]]);var nt=it}}]);
//# sourceMappingURL=130.0f8c9174.js.map