"use strict";(self["webpackChunkjs_shop"]=self["webpackChunkjs_shop"]||[]).push([[255],{5314:function(t,e,a){var l=a(4334),s=a(9554);e["Z"]=(0,l.Q_)("cartStore",{state:()=>({cartList:[],total:null,final_total:null,totalNum:0,isLoading:!1,btnStatus:!1}),actions:{getCartList(){const t="https://vue3-course-api.hexschool.io/api/jysing-aip/cart";this.isLoading=!0,s.ZP.get(t).then((t=>{this.cartList=t.data.data.carts,this.total=t.data.data.total,this.final_total=t.data.data.final_total,this.isLoading=!1}))},addCart(t,e=1){const a="https://vue3-course-api.hexschool.io/api/jysing-aip/cart",l={data:{product_id:t,qty:e}};s.ZP.post(a,l).then((t=>{this.getCartList()}))},removeItem(t){const e=`https://vue3-course-api.hexschool.io/api/jysing-aip/cart/${t}`;s.ZP["delete"](e).then((t=>{this.getCartList()}))},cleanAll(){const t="https://vue3-course-api.hexschool.io/api/jysing-aip/carts";s.ZP["delete"](t).then((t=>{this.getCartList()}))},updateCart(t,e){this.btnStatus=!0;let{id:a,qty:l,product_id:n}=t;!0===e?l+=1:l-=1;const i={product_id:n,qty:l},o=`https://vue3-course-api.hexschool.io/api/jysing-aip/cart/${a}`;s.ZP.put(o,{data:i}).then((t=>{this.btnStatus=!1,this.getCartList()}))}},getters:{getQty(t){return t.cartList.length}}})},7364:function(t,e,a){a.d(e,{Z:function(){return r}});var l=a(3099);const s=["src"];function n(t,e,a,n,i,o){const c=(0,l.up)("LoadingPage");return(0,l.wg)(),(0,l.j4)(c,{active:a.loadStatus,opacity:.9,"background-color":"#fff"},{default:(0,l.w5)((()=>[(0,l._)("img",{src:i.img,alt:"",style:{width:"250px",height:"250px"}},null,8,s)])),_:1},8,["active","opacity"])}var i={props:["loadStatus"],data(){return{img:"./assets/images/pokemon/pika.gif"}}},o=a(5727);const c=(0,o.Z)(i,[["render",n]]);var r=c},3255:function(t,e,a){a.r(e),a.d(e,{default:function(){return ct}});var l=a(3099),s=a(5860),n=a(8317);const i={class:"mainCartList"},o={class:"container-lg"},c={key:0,class:"emptyText"},r=(0,l._)("h3",null,"目前購物車是空的!",-1),u=(0,l._)("h4",null,"前往商店 GO",-1),d=[u],p={key:1,class:"row"},_={class:"col-md-8"},h={class:"cartList"},g={class:"cart-list-group"},v={class:"cartImageBox"},C={class:"imgBox"},m=["src","alt"],y={class:"cartDetailList"},b={key:0,class:"finalPrice"},w={class:"orginPrice"},f={key:1,class:"finalPrice"},x=["onClick"],L={class:"unitBox"},k=["onClick"],S=(0,l._)("p",null,"-",-1),M=[S],Z={class:"unitText"},D=["onClick"],j=(0,l._)("p",null,"+",-1),z=[j],P={class:"cleanBtn"},B=(0,l._)("p",null,"全部清空",-1),q=[B],I={class:"col-md-4"},$={class:"paymentDeatil"},A={class:"titleBox"},G=(0,l._)("h3",null,"購物車資訊",-1),T={class:"inputCode input-group"},H={key:0,class:"errorCode"},N=(0,l._)("p",null,"套用",-1),Q=[N],U={class:"table"},Y=(0,l._)("th",null,[(0,l._)("p",null,"小計")],-1),K={class:"text-end"},O=(0,l._)("th",null,[(0,l._)("p",null,"折價")],-1),V={class:"text-end"},W=(0,l._)("tr",null,[(0,l._)("th",null,[(0,l._)("p",null,"運費")]),(0,l._)("td",{class:"text-end"},[(0,l._)("p",null,"0")])],-1),E={colspan:"2",class:"text-end"},F={class:"nextStepBox"},J=(0,l._)("p",null,"繼續購物",-1),R=[J],X=(0,l._)("p",null,"下一步",-1),tt=[X];function et(t,e,a,u,S,j){const B=(0,l.up)("LoadingImg");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(B,{loadStatus:t.isLoading},null,8,["loadStatus"]),(0,l._)("section",i,[(0,l._)("div",o,[0==t.cartList.length?((0,l.wg)(),(0,l.iD)("div",c,[r,(0,l._)("a",{href:"#",class:"viewMore",onClick:e[0]||(e[0]=(0,s.iM)(((...t)=>j.viewMore&&j.viewMore(...t)),["prevent"]))},d)])):((0,l.wg)(),(0,l.iD)("div",p,[(0,l._)("div",_,[(0,l._)("div",h,[(0,l._)("ul",g,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.cartList,(e=>((0,l.wg)(),(0,l.iD)("li",{class:"list-group-item",key:e.id},[(0,l._)("div",v,[(0,l._)("div",C,[(0,l._)("img",{src:e.product.imageUrl,alt:e.product.title},null,8,m)])]),(0,l._)("div",y,[(0,l._)("h6",null,(0,n.zw)(e.product.title),1),e.coupon?((0,l.wg)(),(0,l.iD)("div",b,[(0,l._)("h5",null," 優惠價: "+(0,n.zw)(e.final_total),1),(0,l._)("div",w,[(0,l._)("p",null,"原價: "+(0,n.zw)(e.total),1)])])):((0,l.wg)(),(0,l.iD)("div",f,[(0,l._)("h5",null," 特價: "+(0,n.zw)(e.final_total),1)])),(0,l._)("a",{href:"",class:"removeBtn",onClick:(0,s.iM)((a=>t.removeItem(e.id)),["prevent"])},null,8,x),(0,l._)("div",L,[(0,l._)("button",(0,l.dG)({type:"button",class:"btn remove"},{disabled:e.qty<=1||t.btnStatus},{onClick:(0,s.iM)((a=>t.updateCart(e,!1)),["prevent"])}),M,16,k),(0,l._)("div",Z,[(0,l._)("p",null,(0,n.zw)(e.qty),1)]),(0,l._)("button",(0,l.dG)({type:"button",class:"btn add"},{disabled:t.btnStatus},{onClick:(0,s.iM)((a=>t.updateCart(e,!0)),["prevent"])}),z,16,D)])])])))),128))]),(0,l._)("div",P,[(0,l._)("button",{type:"button",class:"btn",onClick:e[1]||(e[1]=(0,s.iM)(((...e)=>t.cleanAll&&t.cleanAll(...e)),["prevent"]))},q)])])]),(0,l._)("div",I,[(0,l._)("div",$,[(0,l._)("div",A,[G,(0,l._)("div",T,[""!==S.enterCodeStatus?((0,l.wg)(),(0,l.iD)("p",H,(0,n.zw)(S.enterCodeStatus),1)):(0,l.kq)("",!0),(0,l.wy)((0,l._)("input",{type:"text",placeholder:"輸入優惠碼","onUpdate:modelValue":e[2]||(e[2]=t=>S.Code=t)},null,512),[[s.nr,S.Code]]),(0,l._)("button",{type:"button",class:"btn btn-primary",onClick:e[3]||(e[3]=(0,s.iM)(((...t)=>j.enterCode&&j.enterCode(...t)),["prevent"]))},Q)])]),(0,l._)("table",U,[(0,l._)("tbody",null,[(0,l._)("tr",null,[Y,(0,l._)("td",K,[(0,l._)("p",null,(0,n.zw)(t.total),1)])]),(0,l._)("tr",null,[O,(0,l._)("td",V,[(0,l._)("p",null,(0,n.zw)(t.final_total-t.total),1)])]),W]),(0,l._)("tfoot",null,[(0,l._)("tr",null,[(0,l._)("td",E,[(0,l._)("h4",null,"總計: NT$"+(0,n.zw)(t.final_total),1)])])])]),(0,l._)("div",F,[(0,l._)("button",{type:"button",class:"btn shop",onClick:e[4]||(e[4]=(0,s.iM)(((...t)=>j.viewMore&&j.viewMore(...t)),["prevent"]))},R),(0,l._)("button",{type:"button",class:"btn nextStep",onClick:e[5]||(e[5]=(0,s.iM)(((...t)=>j.nextStep&&j.nextStep(...t)),["prevent"]))},tt)])])])]))])])],64)}a(7658);var at=a(7364),lt=a(5314),st=a(4334),nt={components:{LoadingImg:at.Z},data(){return{Code:null,enterCodeStatus:""}},computed:{...(0,st.rn)(lt.Z,["cartList","total","final_total","btnStatus","isLoading"])},methods:{...(0,st.nv)(lt.Z,["getCartList","removeItem","cleanAll","updateCart"]),enterCode(){const t="https://vue3-course-api.hexschool.io/api/jysing-aip/coupon",e={code:this.Code};this.axios.post(t,{data:e}).then((t=>{!0===t.data.success?(this.getCartList(),this.enterCodeStatus=""):(this.enterCodeStatus=t.data.message,this.Code=null)}))},nextStep(){this.$router.push({name:"cartform"})},viewMore(){this.$router.push("/typeList/all")}},created(){this.getCartList()}},it=a(5727);const ot=(0,it.Z)(nt,[["render",et]]);var ct=ot}}]);
//# sourceMappingURL=255.4ea7d967.js.map