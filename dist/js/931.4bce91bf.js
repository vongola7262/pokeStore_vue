"use strict";(self["webpackChunkjs_shop"]=self["webpackChunkjs_shop"]||[]).push([[931],{7364:function(t,e,a){a.d(e,{Z:function(){return c}});var n=a(3099);const s=["src"];function i(t,e,a,i,l,o){const r=(0,n.up)("LoadingPage");return(0,n.wg)(),(0,n.j4)(r,{active:a.loadStatus,opacity:.9,"background-color":"#fff"},{default:(0,n.w5)((()=>[(0,n._)("img",{src:l.img,alt:"",style:{width:"250px",height:"250px"}},null,8,s)])),_:1},8,["active","opacity"])}var l={props:["loadStatus"],data(){return{img:"./assets/images/pokemon/pika.gif"}}},o=a(5727);const r=(0,o.Z)(l,[["render",i]]);var c=r},3981:function(t,e,a){a.d(e,{Z:function(){return d}});var n=a(3099),s=a(8317),i=a(5860);const l={key:0,class:"pagination",id:"pageid"},o=["data-page"],r=["data-page","onClick"],c=["data-page"];function h(t,e,a,h,p,g){return 0!==a.num?((0,n.wg)(),(0,n.iD)("ul",l,[(0,n._)("li",{class:(0,s.C_)(["page-item",{disabled:!g.hasPage}])},[(0,n._)("a",{class:"page-link",href:"#","data-page":a.nowPage-1,onClick:e[0]||(e[0]=(0,i.iM)((t=>g.pageChange(a.nowPage-1)),["prevent"]))}," 上一頁 ",8,o)],2),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.num,(t=>((0,n.wg)(),(0,n.iD)("li",{class:(0,s.C_)(["page-item",{active:t===a.nowPage}]),key:t},[(0,n._)("a",{class:"page-link",href:"#","data-page":t,onClick:(0,i.iM)((e=>g.pageChange(t)),["prevent"])},(0,s.zw)(t),9,r)],2)))),128)),(0,n._)("li",{class:(0,s.C_)(["page-item",{disabled:!g.hasNext}])},[(0,n._)("a",{class:"page-link",href:"#","data-page":a.nowPage+1,onClick:e[1]||(e[1]=(0,i.iM)((t=>g.pageChange(a.nowPage+1)),["prevent"]))}," 下一頁 ",8,c)],2)])):(0,n.kq)("",!0)}var p={props:["num","nowPage"],methods:{pageChange(t){this.$emit("newpage",t),window.scrollTo({top:0,left:0,behavior:"smooth"})}},computed:{hasPage(){return this.nowPage>1},hasNext(){return this.nowPage<this.num}}},g=a(5727);const u=(0,g.Z)(p,[["render",h]]);var d=u},3931:function(t,e,a){a.r(e),a.d(e,{default:function(){return T}});var n=a(3099),s=a(5860),i=a(8317);const l={class:"orderList"},o={class:"container-md"},r={class:"input-group"},c=(0,n._)("label",{for:"inputNum"},[(0,n._)("h5",null,"快速搜尋")],-1),h=(0,n._)("p",null,"搜尋",-1),p=[h],g=(0,n._)("p",null,"清除",-1),u=[g],d={class:"listBox"},_={class:"table align-middle"},w=(0,n._)("thead",null,[(0,n._)("th"),(0,n._)("th",null,[(0,n._)("h6",null,"訂單編號")]),(0,n._)("th",null,[(0,n._)("h6",null,"訂購人")]),(0,n._)("th",{class:"totalPrice"},[(0,n._)("h6",null,"總金額")]),(0,n._)("th",null,[(0,n._)("h6",null,"狀態")]),(0,n._)("th")],-1),k={class:"totalPrice"},m={key:0,class:"payed"},f={key:1,class:"unpay"},y=["onClick"],L=(0,n._)("p",null,"查看更多",-1),v=[L],b={key:0,class:"noneList"},P=(0,n._)("td",{colspan:"6"},[(0,n._)("h4",null,"查無訂單，請重新搜尋")],-1),C=[P];function D(t,e,a,h,g,L){const P=(0,n.up)("LoadingImg"),D=(0,n.up)("UserPageList");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(P,{loadStatus:g.isLoading},null,8,["loadStatus"]),(0,n._)("section",l,[(0,n._)("div",o,[(0,n._)("div",r,[c,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",placeholder:"請輸入訂單編號",id:"inputNum","onUpdate:modelValue":e[0]||(e[0]=t=>g.keyword=t)},null,512),[[s.nr,g.keyword]]),(0,n._)("button",{class:"btn btn-search",type:"button",onClick:e[1]||(e[1]=(0,s.iM)((t=>L.keyWordSearch(!0)),["prevent"]))},p),(0,n._)("button",{type:"button",class:"btn btn-clean",onClick:e[2]||(e[2]=(0,s.iM)((t=>L.keyWordSearch(!1)),["prevent"]))},u)]),(0,n._)("div",d,[(0,n._)("table",_,[w,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(L.pageDetail,((t,e)=>((0,n.wg)(),(0,n.iD)("tr",{key:t.id},[(0,n._)("td",null,[(0,n._)("p",null,(0,i.zw)(e+1),1)]),(0,n._)("td",null,[(0,n._)("p",null,(0,i.zw)(t.id),1)]),(0,n._)("td",null,[(0,n._)("p",null,(0,i.zw)(t.user.name),1)]),(0,n._)("td",k,[(0,n._)("p",null,"NT$ "+(0,i.zw)(t.total),1)]),(0,n._)("td",null,[t.is_paid?((0,n.wg)(),(0,n.iD)("p",m,"已付款")):((0,n.wg)(),(0,n.iD)("p",f,"待付款"))]),(0,n._)("td",null,[(0,n._)("button",{type:"button",class:"btn btn-more",onClick:(0,s.iM)((e=>L.checkOrder(t.id)),["prevent"])},v,8,y)])])))),128)),0==L.pageDetail.length?((0,n.wg)(),(0,n.iD)("tr",b,C)):(0,n.kq)("",!0)])])]),(0,n._)("div",null,[(0,n.Wm)(D,{num:g.pageTotal,"now-Page":g.page,onNewpage:L.resetPage},null,8,["num","now-Page","onNewpage"])])])])],64)}a(7658);var x=a(3981),M=a(7364),N={components:{UserPageList:x.Z,LoadingImg:M.Z},data(){return{isLoading:!1,orderList:[],finalList:[],keyword:"",search:"",startPage:1,pageTotal:0,perpage:10,page:null}},methods:{getOrderList(t){const e=`https://vue3-course-api.hexschool.io/api/jysing-aip/orders?page=${t}`;this.isLoading=!0,this.axios.get(e).then((t=>{const e=[...this.orderList,...t.data.orders];this.orderList=e,t.data.pagination.has_next?this.getOrderList(this.startPage+=1):(this.calc(this.orderList.length),this.page=1,this.finalList=this.orderList,this.isLoading=!1)}))},checkOrder(t){this.$router.push(`/order/checkout/${t}`)},keyWordSearch(t){!0===t?this.search=this.keyword:(this.search="",this.keyword=""),this.search=this.keyword},calc(t){const e=this.perpage;this.pageTotal=Math.ceil(t/e)},resetPage(t){this.page=t}},watch:{search(t){this.finalList=this.orderList.filter((e=>e.id.match(t))),this.calc(this.finalList.length),this.page=1}},computed:{pageDetail(){const t=this.pageTotal,e=this.perpage;let a=this.page;a>t&&(a=t);const n=a*e-e+1,s=a*e,i=[];return this.finalList.forEach(((t,e)=>{const a=e+1;a>=n&&a<=s&&i.push(t)})),i}},created(){this.getOrderList(this.startPage)}},S=a(5727);const Z=(0,S.Z)(N,[["render",D]]);var T=Z}}]);
//# sourceMappingURL=931.4bce91bf.js.map