"use strict";(self["webpackChunkjs_shop"]=self["webpackChunkjs_shop"]||[]).push([[384],{7364:function(t,e,o){o.d(e,{Z:function(){return p}});var a=o(3099);const i=["src"];function n(t,e,o,n,l,s){const u=(0,a.up)("LoadingPage");return(0,a.wg)(),(0,a.j4)(u,{active:o.loadStatus,opacity:.9,"background-color":"#fff"},{default:(0,a.w5)((()=>[(0,a._)("img",{src:l.img,alt:"",style:{width:"250px",height:"250px"}},null,8,i)])),_:1},8,["active","opacity"])}var l={props:["loadStatus"],data(){return{img:"./assets/images/pokemon/pika.gif"}}},s=o(5727);const u=(0,s.Z)(l,[["render",n]]);var p=u},7384:function(t,e,o){o.r(e),o.d(e,{default:function(){return j}});var a=o(3099),i=o(8317),n=o(5860);const l={class:"mainCartList"},s={class:"list-group"},u=["onUpdate:modelValue","onChange"],p={key:0},r={key:1},c=["onClick"],d=(0,a._)("p",null,"刪除",-1),h=[d],g=(0,a._)("p",null,"全部清空",-1),_=[g],m={class:"inputCode"},C=(0,a._)("p",null,"套用",-1),y=[C],f=(0,a._)("p",null,"下一步",-1),v=[f];function w(t,e,o,d,g,C){const f=(0,a.up)("LoadingImg");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(f,{loadStatus:g.isLoading},null,8,["loadStatus"]),(0,a._)("section",l,[(0,a._)("ul",s,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(g.cartList,(t=>((0,a.wg)(),(0,a.iD)("li",{class:"list-group-item",key:t.id},[(0,a._)("p",null,(0,i.zw)(t.product.title),1),(0,a.wy)((0,a._)("input",{type:"number",name:"itemQty",id:"itemQty","onUpdate:modelValue":e=>t.qty=e,min:"1",onChange:(0,n.iM)((e=>C.updateCart(t)),["prevent"])},null,40,u),[[n.nr,t.qty]]),t.coupon?((0,a.wg)(),(0,a.iD)("p",p," 優惠價 "+(0,i.zw)(t.final_total)+"(折扣"+(0,i.zw)(t.coupon.percent)+"%) ",1)):((0,a.wg)(),(0,a.iD)("p",r,"特價 "+(0,i.zw)(t.final_total),1)),(0,a._)("button",{type:"button",onClick:(0,n.iM)((e=>C.removeItem(t.id)),["prevent"])},h,8,c)])))),128))]),(0,a._)("button",{type:"button",onClick:e[0]||(e[0]=(0,n.iM)(((...t)=>C.cleanAll&&C.cleanAll(...t)),["prevent"]))},_),(0,a._)("div",m,[(0,a.wy)((0,a._)("input",{type:"text",placeholder:"輸入優惠碼","onUpdate:modelValue":e[1]||(e[1]=t=>g.Code=t)},null,512),[[n.nr,g.Code]]),(0,a._)("button",{type:"button",onClick:e[2]||(e[2]=(0,n.iM)(((...t)=>C.enterCode&&C.enterCode(...t)),["prevent"]))},y)]),(0,a._)("p",null,"原價 "+(0,i.zw)(g.total),1),(0,a._)("p",null,"折價 "+(0,i.zw)(g.total-g.final_total),1),(0,a._)("p",null,"總金額 "+(0,i.zw)(g.final_total),1),(0,a._)("a",{href:"#",onClick:e[3]||(e[3]=(0,n.iM)((t=>C.nextStep()),["prevent"]))},v)])],64)}o(7658);var L=o(7364),k={components:{LoadingImg:L.Z},data(){return{cartList:null,total:null,final_total:null,Code:null,isLoading:!1}},methods:{getCartList(){const t="https://vue3-course-api.hexschool.io/api/jysing-aip/cart";this.isLoading=!0,this.axios.get(t).then((t=>{this.cartList=t.data.data.carts,this.total=t.data.data.total,this.final_total=t.data.data.final_total,this.isLoading=!1}))},updateCart(t){const{id:e,qty:o,product_id:a}=t,i={product_id:a,qty:o},n=`https://vue3-course-api.hexschool.io/api/jysing-aip/cart/${e}`;this.axios.put(n,{data:i}).then((t=>{console.log(t),this.getCartList()}))},removeItem(t){const e=`https://vue3-course-api.hexschool.io/api/jysing-aip/cart/${t}`;this.axios.delete(e).then((t=>{console.log(t),this.getCartList()}))},cleanAll(){const t="https://vue3-course-api.hexschool.io/api/jysing-aip/carts";this.axios.delete(t).then((t=>{console.log(t),this.getCartList()}))},enterCode(){const t="https://vue3-course-api.hexschool.io/api/jysing-aip/coupon",e={code:this.Code};this.axios.post(t,{data:e}).then((t=>{console.log(t),this.getCartList()}))},nextStep(){this.$router.push({name:"cartform"})}},created(){this.getCartList()}},x=o(5727);const b=(0,x.Z)(k,[["render",w]]);var j=b}}]);
//# sourceMappingURL=384.a4a85a0f.js.map