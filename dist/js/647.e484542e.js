"use strict";(self["webpackChunkjs_shop"]=self["webpackChunkjs_shop"]||[]).push([[647],{5314:function(t,s,i){var a=i(4334),e=i(9554),n=i(7775);const c=(0,n.Z)();s["Z"]=(0,a.Q_)("cartStore",{state:()=>({cartList:[],total:null,final_total:null,totalNum:0}),actions:{getCartList(){const t="https://vue3-course-api.hexschool.io/api/jysing-aip/cart";e.ZP.get(t).then((t=>{this.cartList=t.data.data.carts,this.total=t.data.data.total,this.final_total=t.data.data.final_total}))},addCart(t,s=1){const i="https://vue3-course-api.hexschool.io/api/jysing-aip/cart",a={data:{product_id:t,qty:s}};e.ZP.post(i,a).then((t=>{this.getCartList(),this.hintMessage(!0,"已加入購物車")})).catch((t=>{this.hintMessage(!1,t.message)}))},removeItem(t){const s=`https://vue3-course-api.hexschool.io/api/jysing-aip/cart/${t}`;e.ZP["delete"](s).then((t=>{this.getCartList(),this.hintMessage(!0,"已刪除")})).catch((t=>{this.hintMessage(!1,t.message)}))},cleanAll(){const t="https://vue3-course-api.hexschool.io/api/jysing-aip/carts";e.ZP["delete"](t).then((t=>{this.getCartList(),this.hintMessage(!0,"清空購物車")})).catch((t=>{this.hintMessage(!1,t.message)}))},updateCart(t,s){c.btnStatus=!0;let{id:i,qty:a,product_id:n}=t;!0===s?a+=1:a-=1;const o={product_id:n,qty:a},r=`https://vue3-course-api.hexschool.io/api/jysing-aip/cart/${i}`;e.ZP.put(r,{data:o}).then((t=>{c.btnStatus=!1,this.getCartList()})).catch((t=>{this.hintMessage(!1,t.message)}))},hintMessage(t,s){c.hintStatus.active=!0,c.hintStatus.status=t,c.hintStatus.text=s,setTimeout((()=>{c.hintStatus.active=!1,c.hintStatus.status=!1,c.hintStatus.text=""}),"1000")}},getters:{getQty(t){return t.cartList.length}}})},3118:function(t,s,i){i.d(s,{Z:function(){return h}});var a=i(3099),e=i(8317);const n={key:0,class:"imgBox"},c=["src"],o={key:1,class:"imgBox"},r=["src"];function l(t,s,i,l,u,d){return(0,a.wg)(),(0,a.iD)("div",{class:(0,e.C_)(["hintBox",{active:i.isHint.active}])},[i.isHint.status?((0,a.wg)(),(0,a.iD)("div",n,[(0,a._)("img",{src:u.success,alt:""},null,8,c)])):((0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("img",{src:u.error,alt:""},null,8,r)])),(0,a._)("p",{class:(0,e.C_)({error:!i.isHint.status})},(0,e.zw)(i.isHint.text),3)],2)}var u={props:["isHint"],data(){return{success:"./assets/images/icon/checked.png",error:"./assets/images/icon/cancel.png"}}},d=i(5727);const p=(0,d.Z)(u,[["render",l]]);var h=p},7364:function(t,s,i){i.d(s,{Z:function(){return l}});var a=i(3099);const e=["src"];function n(t,s,i,n,c,o){const r=(0,a.up)("LoadingPage");return(0,a.wg)(),(0,a.j4)(r,{active:i.loadStatus,opacity:.9,"background-color":"#fff"},{default:(0,a.w5)((()=>[(0,a._)("img",{src:c.img,alt:"",style:{width:"250px",height:"250px"}},null,8,e)])),_:1},8,["active","opacity"])}var c={props:["loadStatus"],data(){return{img:"./assets/images/pokemon/pika.gif"}}},o=i(5727);const r=(0,o.Z)(c,[["render",n]]);var l=r},6647:function(t,s,i){i.r(s),i.d(s,{default:function(){return E}});var a=i(3099),e=i(8317),n=i(5860);const c={class:"mainProduct"},o={class:"container-lg"},r={class:"mainBox"},l={key:0,class:"row"},u={class:"col-md-7"},d={class:"imgBox"},p=["src"],h={class:"col-md-5"},g={class:"detailBox"},_={class:"orginPrice"},m={class:"addBox"},v={class:"unitBox"},w=(0,a._)("p",null,"-",-1),y=[w],f={class:"unitText"},k=(0,a._)("p",null,"+",-1),C=[k],x=(0,a._)("h5",null,"加入購物車",-1),P=[x],S={key:0,class:"detailText"},b=(0,a._)("h4",null,"商品特色",-1),Z={key:1,class:"mayProduct"},L=(0,a._)("h4",null,"推薦商品",-1),q=["onClick"],M={class:"moreImg"},B=["src","alt"],H=(0,a._)("span",null,"查看更多",-1);function j(t,s,i,w,k,x){const j=(0,a.up)("LoadingImg"),D=(0,a.up)("HintCard"),z=(0,a.up)("swiper-slide"),I=(0,a.up)("swiper");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(j,{loadStatus:t.isLoading},null,8,["loadStatus"]),(0,a.Wm)(D,{isHint:t.hintStatus},null,8,["isHint"]),(0,a._)("section",c,[(0,a._)("div",o,[(0,a._)("div",r,[null!==t.product?((0,a.wg)(),(0,a.iD)("div",l,[(0,a._)("div",u,[(0,a._)("div",d,[(0,a._)("img",{src:t.product.imageUrl,alt:"product.title"},null,8,p)])]),(0,a._)("div",h,[(0,a._)("div",g,[(0,a._)("h3",null,(0,e.zw)(t.product.title),1),(0,a._)("div",_,[(0,a._)("p",null,"原價: NT$"+(0,e.zw)(t.product.origin_price),1)]),(0,a._)("h4",null,"特價: NT$"+(0,e.zw)(t.product.price),1)]),(0,a._)("div",m,[(0,a._)("div",v,[(0,a._)("button",(0,a.dG)({type:"button",class:"btn remove"},{disabled:k.product_qty<=1},{onClick:s[0]||(s[0]=(0,n.iM)((t=>x.updateCart(!1)),["prevent"]))}),y,16),(0,a._)("div",f,[(0,a._)("p",null,(0,e.zw)(k.product_qty),1)]),(0,a._)("button",{type:"button",class:"btn add",onClick:s[1]||(s[1]=(0,n.iM)((t=>x.updateCart(!0)),["prevent"]))},C)]),(0,a._)("button",{type:"button",class:"btn btn-primary",onClick:s[2]||(s[2]=(0,n.iM)((s=>t.addCart(t.product.id,k.product_qty)),["prevent"]))},P)])])])):(0,a.kq)("",!0)]),null!==t.product?((0,a.wg)(),(0,a.iD)("div",S,[b,(0,a._)("p",null,(0,e.zw)(t.product.content),1)])):(0,a.kq)("",!0),x.moreProducts.length>=3?((0,a.wg)(),(0,a.iD)("div",Z,[L,(0,a.Wm)(I,{navigation:!0,modules:k.modules,"space-between":10,"slides-per-view":3,loop:!0,breakpoints:{414:{slidesPerView:2,spaceBetween:20},768:{slidesPerView:3,spaceBetween:30}},class:"mySwiper"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(x.moreProducts,(s=>((0,a.wg)(),(0,a.j4)(z,{key:s.id},{default:(0,a.w5)((()=>[(0,a._)("div",{class:"imgBox",onClick:(0,n.iM)((i=>t.getProduct(s.id)),["prevent"])},[(0,a._)("div",M,[(0,a._)("img",{src:s.imageUrl,alt:s.title},null,8,B),H]),(0,a._)("p",null,(0,e.zw)(s.title),1)],8,q)])),_:2},1024)))),128))])),_:1},8,["modules"])])):(0,a.kq)("",!0)])])],64)}i(7658);var D=i(7364),z=i(195),I=i(8150),T=i(3118),$=i(645),W=i(6311),A=i(5314),N=i(7775),Q=i(4334);(0,$.QI)({title:"寶可夢商品"});var U={props:["id"],components:{LoadingImg:D.Z,Swiper:z.tq,SwiperSlide:z.o5,HintCard:T.Z},data(){return{product_qty:1,modules:[I.W_]}},computed:{...(0,Q.rn)(N.Z,["isLoading","hintStatus"]),...(0,Q.rn)(W.Z,["product","productsList"]),moreProducts(){const t=this.productsList,s=[];if(null!=this.product){const{category:i,id:a}=this.product;t.forEach((t=>{t.category===i&&t.id!==a&&s.push(t)}))}return s}},methods:{...(0,Q.nv)(A.Z,["addCart"]),...(0,Q.nv)(W.Z,["getProduct","getAllProducts"]),updateCart(t){!0===t?this.product_qty+=1:this.product_qty-=1}},created(){const{id:t}=this.$route.params;this.getProduct(t),this.getAllProducts()}},V=i(5727);const Y=(0,V.Z)(U,[["render",j]]);var E=Y}}]);
//# sourceMappingURL=647.e484542e.js.map