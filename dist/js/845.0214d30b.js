"use strict";(self["webpackChunkjs_shop"]=self["webpackChunkjs_shop"]||[]).push([[845],{5314:function(t,a,e){var s=e(4334),i=e(9554),n=e(7775);const o=(0,n.Z)();a["Z"]=(0,s.Q_)("cartStore",{state:()=>({cartList:[],total:null,final_total:null,totalNum:0}),actions:{getCartList(){const t="https://vue3-course-api.hexschool.io/api/jysing-aip/cart";o.isLoading=!0,i.ZP.get(t).then((t=>{this.cartList=t.data.data.carts,this.total=t.data.data.total,this.final_total=t.data.data.final_total,o.isLoading=!1}))},addCart(t,a=1){const e="https://vue3-course-api.hexschool.io/api/jysing-aip/cart",s={data:{product_id:t,qty:a}};i.ZP.post(e,s).then((t=>{this.getCartList()}))},removeItem(t){const a=`https://vue3-course-api.hexschool.io/api/jysing-aip/cart/${t}`;i.ZP["delete"](a).then((t=>{this.getCartList()}))},cleanAll(){const t="https://vue3-course-api.hexschool.io/api/jysing-aip/carts";i.ZP["delete"](t).then((t=>{this.getCartList()}))},updateCart(t,a){o.btnStatus=!0;let{id:e,qty:s,product_id:n}=t;!0===a?s+=1:s-=1;const r={product_id:n,qty:s},c=`https://vue3-course-api.hexschool.io/api/jysing-aip/cart/${e}`;i.ZP.put(c,{data:r}).then((t=>{o.btnStatus=!1,this.getCartList()}))}},getters:{getQty(t){return t.cartList.length}}})},6311:function(t,a,e){var s=e(4334),i=e(9554),n=e(7775);const o=(0,n.Z)();a["Z"]=(0,s.Q_)("productStore",{state:()=>({productsList:[],product:null}),actions:{getAllProducts(){o.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/jysing-aip/products/all";i.ZP.get(t).then((t=>{this.productsList=t.data.products,o.isLoading=!1}))},getProduct(t){o.isLoading=!0;const a=`https://vue3-course-api.hexschool.io/api/jysing-aip/product/${t}`;i.ZP.get(a).then((t=>{this.product=t.data.product,o.isLoading=!1}))}}})},7775:function(t,a,e){var s=e(4334);a["Z"]=(0,s.Q_)("statusStore",{state:()=>({isLoading:!1,btnStatus:!1})})},5291:function(t,a,e){e.d(a,{Z:function(){return p}});var s=e(3099),i=e(8317);const n={class:"banner"},o=["src"];function r(t,a,e,r,c,l){return(0,s.wg)(),(0,s.iD)("section",n,[(0,s._)("img",{src:e.banner.img,alt:""},null,8,o),(0,s._)("h2",null,(0,i.zw)(e.banner.title),1)])}var c={props:["banner"]},l=e(5727);const d=(0,l.Z)(c,[["render",r]]);var p=d},7364:function(t,a,e){e.d(a,{Z:function(){return l}});var s=e(3099);const i=["src"];function n(t,a,e,n,o,r){const c=(0,s.up)("LoadingPage");return(0,s.wg)(),(0,s.j4)(c,{active:e.loadStatus,opacity:.9,"background-color":"#fff"},{default:(0,s.w5)((()=>[(0,s._)("img",{src:o.img,alt:"",style:{width:"250px",height:"250px"}},null,8,i)])),_:1},8,["active","opacity"])}var o={props:["loadStatus"],data(){return{img:"./assets/images/pokemon/pika.gif"}}},r=e(5727);const c=(0,r.Z)(o,[["render",n]]);var l=c},3981:function(t,a,e){e.d(a,{Z:function(){return h}});var s=e(3099),i=e(8317),n=e(5860);const o={key:0,class:"pagination",id:"pageid"},r=["data-page"],c=["data-page","onClick"],l=["data-page"];function d(t,a,e,d,p,u){return 0!==e.num?((0,s.wg)(),(0,s.iD)("ul",o,[(0,s._)("li",{class:(0,i.C_)(["page-item",{disabled:!u.hasPage}])},[(0,s._)("a",{class:"page-link",href:"#","data-page":e.nowPage-1,onClick:a[0]||(a[0]=(0,n.iM)((t=>u.pageChange(e.nowPage-1)),["prevent"]))}," 上一頁 ",8,r)],2),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.num,(t=>((0,s.wg)(),(0,s.iD)("li",{class:(0,i.C_)(["page-item",{active:t===e.nowPage}]),key:t},[(0,s._)("a",{class:"page-link",href:"#","data-page":t,onClick:(0,n.iM)((a=>u.pageChange(t)),["prevent"])},(0,i.zw)(t),9,c)],2)))),128)),(0,s._)("li",{class:(0,i.C_)(["page-item",{disabled:!u.hasNext}])},[(0,s._)("a",{class:"page-link",href:"#","data-page":e.nowPage+1,onClick:a[1]||(a[1]=(0,n.iM)((t=>u.pageChange(e.nowPage+1)),["prevent"]))}," 下一頁 ",8,l)],2)])):(0,s.kq)("",!0)}var p={props:["num","nowPage"],methods:{pageChange(t){this.$emit("newpage",t),window.scrollTo({top:0,left:0,behavior:"smooth"})}},computed:{hasPage(){return this.nowPage>1},hasNext(){return this.nowPage<this.num}}},u=e(5727);const g=(0,u.Z)(p,[["render",d]]);var h=g},8845:function(t,a,e){e.r(a),e.d(a,{default:function(){return Q}});var s=e(3099),i=e(5860),n=e(8317);const o={class:"mainList"},r={class:"container-md"},c={class:"row keywordBox"},l={class:"input-group"},d={class:"row"},p={class:"col-md-3"},u={class:"typeList"},g=["onClick"],h={class:"col-md-9"},v={class:"row listBox"},m=["onClick"],w={class:"imgBox"},_=["src"],y={class:"card-body"},k={class:"textBox"},L={class:"card-title"},C={class:"btnBox"},b=["onClick"],f=(0,s._)("p",null,"加入購物車",-1),P=[f],x={key:0,class:"col-md-4"},Z=(0,s._)("div",{class:"emptyCard"},[(0,s._)("h5",{class:"card-title"},"沒有商品"),(0,s._)("p",{class:"card-text"},[(0,s.Uk)(" 暫時沒有搜尋的商品"),(0,s._)("br"),(0,s.Uk)("請重新搜尋 ")])],-1),D=[Z],j={key:0,class:"row"},S={class:"col-md-12"};function M(t,a,e,f,Z,M){const T=(0,s.up)("LoadingImg"),$=(0,s.up)("BannerImg"),B=(0,s.up)("UserPageList");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(T,{loadStatus:t.isLoading},null,8,["loadStatus"]),(0,s.Wm)($,{banner:Z.bannerDetail},null,8,["banner"]),(0,s._)("section",o,[(0,s._)("div",r,[(0,s._)("div",c,[(0,s._)("div",l,[(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",placeholder:"關鍵字搜尋","onUpdate:modelValue":a[0]||(a[0]=t=>Z.keyword=t)},null,512),[[i.nr,Z.keyword]]),(0,s._)("button",{class:"btn btn-search",type:"button",onClick:a[1]||(a[1]=(0,i.iM)((t=>M.search(!0)),["prevent"]))}," 搜尋 "),(0,s._)("button",{class:"btn btn-clean",type:"button",onClick:a[2]||(a[2]=(0,i.iM)((t=>M.search(!1)),["prevent"]))}," 清除 ")])]),(0,s._)("div",d,[(0,s._)("div",p,[(0,s._)("ul",u,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(Z.typeList,((t,a)=>((0,s.wg)(),(0,s.iD)("li",{key:a,class:(0,n.C_)({active:t.id==Z.searchList.type}),onClick:(0,i.iM)((a=>M.chooseItem(t.id)),["prevent"])},[(0,s._)("h5",null,(0,n.zw)(t.text),1)],10,g)))),128))])]),(0,s._)("div",h,[(0,s._)("div",v,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(M.pageDetail,(a=>((0,s.wg)(),(0,s.iD)("div",{class:"col-sm-6 col-lg-4 listlayout",key:a.id},[(0,s._)("div",{class:"card",onClick:(0,i.iM)((t=>M.getProductDetail(a.id)),["prevent"])},[(0,s._)("div",w,[(0,s._)("img",{src:a.imageUrl,class:"card-img-top",alt:""},null,8,_)]),(0,s._)("div",y,[(0,s._)("div",k,[(0,s._)("h5",L,(0,n.zw)(a.title),1),(0,s._)("p",null,"特價NT$ "+(0,n.zw)(a.price),1)]),(0,s._)("div",C,[(0,s._)("button",{type:"button",class:"btn btn-addCart",onClick:(0,i.iM)((e=>t.addCart(a.id)),["stop"])},P,8,b)])])],8,m)])))),128)),0==Z.typeProducts.length?((0,s.wg)(),(0,s.iD)("div",x,D)):(0,s.kq)("",!0)]),Z.pageTotal>1?((0,s.wg)(),(0,s.iD)("div",j,[(0,s._)("div",S,[(0,s.Wm)(B,{num:Z.pageTotal,"now-Page":Z.page,onNewpage:M.resetPage},null,8,["num","now-Page","onNewpage"])])])):(0,s.kq)("",!0)])])])])],64)}e(7658);var T=e(3981),$=e(7364),B=e(5291),I=e(6311),q=e(7775),N=e(5314),U=e(4334),z={props:["id"],components:{UserPageList:T.Z,LoadingImg:$.Z,BannerImg:B.Z},data(){return{bannerDetail:{title:"商品列表",img:"./assets/images/banner/banner2.jpg"},typeList:[{id:"all",text:"全部商品"},{id:"hot",text:"潮流專區"},{id:"joint",text:"最新聯名"},{id:"Tshirt",text:"運動用品"},{id:"sunscreen",text:"防曬系列"},{id:"3C",text:"3C行動裝置"},{id:"phoneCase",text:"寶可夢手機殼"}],keyword:null,searchList:{products:[],word:null,type:null},typeProducts:[],page:null,pageTotal:0,perpage:12}},methods:{...(0,U.nv)(I.Z,["getAllProducts"]),...(0,U.nv)(N.Z,["addCart"]),calc(t){const a=this.perpage;this.pageTotal=Math.ceil(t/a)},resetPage(t){this.page=t},getProductDetail(t){this.$router.push(`/product/${t}`)},chooseItem(t){this.searchList.type=t},search(t){!0===t?this.searchList.word=this.keyword:(this.searchList.word=null,this.keyword=null)}},watch:{productsList(t){this.searchList.products=t},searchList:{handler(t){const a=t.type,e=[],s=t.word,i=t.products;let n=null;i.forEach((t=>{("all"===a||t.category===a)&&e.push(t)})),n=null!==s?e.filter((t=>t.title.match(s))):e,this.calc(n.length),this.typeProducts=n,this.page=1},deep:!0}},computed:{...(0,U.rn)(q.Z,["isLoading"]),...(0,U.rn)(I.Z,["productsList"]),pageDetail(){const t=this.pageTotal,a=this.perpage;let e=this.page;e>t&&(e=t);const s=e*a-a+1,i=e*a,n=[];return this.typeProducts.forEach(((t,a)=>{const e=a+1;e>=s&&e<=i&&n.push(t)})),n}},created(){this.searchList.type=this.$route.params.id,this.getAllProducts()}},A=e(5727);const H=(0,A.Z)(z,[["render",M]]);var Q=H}}]);
//# sourceMappingURL=845.0214d30b.js.map