"use strict";(self["webpackChunkjs_shop"]=self["webpackChunkjs_shop"]||[]).push([[255],{5314:function(t,a,e){var l=e(4334),s=e(9554);a["Z"]=(0,l.Q_)("cartStore",{state:()=>({cartList:[],total:null,final_total:null,totalNum:0,isLoading:!1,btnStatus:!1}),actions:{getCartList(){const t="https://vue3-course-api.hexschool.io/api/jysing-aip/cart";this.isLoading=!0,s.ZP.get(t).then((t=>{this.cartList=t.data.data.carts,this.total=t.data.data.total,this.final_total=t.data.data.final_total,this.totalNum=t.data.data.carts.length,this.isLoading=!1}))},addCart(t,a=1){const e="https://vue3-course-api.hexschool.io/api/jysing-aip/cart",l={data:{product_id:t,qty:a}};s.ZP.post(e,l).then((t=>{this.getCartList()}))},removeItem(t){const a=`https://vue3-course-api.hexschool.io/api/jysing-aip/cart/${t}`;s.ZP["delete"](a).then((t=>{this.getCartList()}))},cleanAll(){const t="https://vue3-course-api.hexschool.io/api/jysing-aip/carts";s.ZP["delete"](t).then((t=>{this.getCartList()}))},updateCart(t,a){this.btnStatus=!0;let{id:e,qty:l,product_id:n}=t;!0===a?l+=1:l-=1;const i={product_id:n,qty:l},o=`https://vue3-course-api.hexschool.io/api/jysing-aip/cart/${e}`;s.ZP.put(o,{data:i}).then((t=>{this.btnStatus=!1,this.getCartList()}))}}})},7364:function(t,a,e){e.d(a,{Z:function(){return r}});var l=e(3099);const s=["src"];function n(t,a,e,n,i,o){const c=(0,l.up)("LoadingPage");return(0,l.wg)(),(0,l.j4)(c,{active:e.loadStatus,opacity:.9,"background-color":"#fff"},{default:(0,l.w5)((()=>[(0,l._)("img",{src:i.img,alt:"",style:{width:"250px",height:"250px"}},null,8,s)])),_:1},8,["active","opacity"])}var i={props:["loadStatus"],data(){return{img:"./assets/images/pokemon/pika.gif"}}},o=e(5727);const c=(0,o.Z)(i,[["render",n]]);var r=c},3255:function(t,a,e){e.r(a),e.d(a,{default:function(){return ct}});var l=e(3099),s=e(5860),n=e(8317);const i={class:"mainCartList"},o={class:"container-lg"},c={key:0,class:"emptyText"},r=(0,l._)("h3",null,"目前購物車是空的!",-1),u=(0,l._)("h4",null,"前往商店 GO",-1),d=[u],p={key:1,class:"row"},_={class:"col-md-8"},h={class:"cartList"},g={class:"cart-list-group"},v={class:"cartImageBox"},C={class:"imgBox"},m=["src","alt"],b={class:"cartDetailList"},y={key:0,class:"finalPrice"},w={class:"orginPrice"},f={key:1,class:"finalPrice"},x=["onClick"],k={class:"unitBox"},L=["onClick"],S=(0,l._)("p",null,"-",-1),M=[S],Z={class:"unitText"},D=["onClick"],j=(0,l._)("p",null,"+",-1),z=[j],P={class:"cleanBtn"},B=(0,l._)("p",null,"全部清空",-1),q=[B],I={class:"col-md-4"},$={class:"paymentDeatil"},A={class:"titleBox"},G=(0,l._)("h3",null,"購物車資訊",-1),N={class:"inputCode input-group"},T={key:0,class:"errorCode"},H=(0,l._)("p",null,"套用",-1),U=[H],Y={class:"table"},K=(0,l._)("th",null,[(0,l._)("p",null,"小計")],-1),O={class:"text-end"},Q=(0,l._)("th",null,[(0,l._)("p",null,"折價")],-1),V={class:"text-end"},W=(0,l._)("tr",null,[(0,l._)("th",null,[(0,l._)("p",null,"運費")]),(0,l._)("td",{class:"text-end"},[(0,l._)("p",null,"0")])],-1),E={colspan:"2",class:"text-end"},F={class:"nextStepBox"},J=(0,l._)("p",null,"繼續購物",-1),R=[J],X=(0,l._)("p",null,"下一步",-1),tt=[X];function at(t,a,e,u,S,j){const B=(0,l.up)("LoadingImg");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(B,{loadStatus:t.isLoading},null,8,["loadStatus"]),(0,l._)("section",i,[(0,l._)("div",o,[0==t.cartList.length?((0,l.wg)(),(0,l.iD)("div",c,[r,(0,l._)("a",{href:"#",class:"viewMore",onClick:a[0]||(a[0]=(0,s.iM)(((...t)=>j.viewMore&&j.viewMore(...t)),["prevent"]))},d)])):((0,l.wg)(),(0,l.iD)("div",p,[(0,l._)("div",_,[(0,l._)("div",h,[(0,l._)("ul",g,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.cartList,(a=>((0,l.wg)(),(0,l.iD)("li",{class:"list-group-item",key:a.id},[(0,l._)("div",v,[(0,l._)("div",C,[(0,l._)("img",{src:a.product.imageUrl,alt:a.product.title},null,8,m)])]),(0,l._)("div",b,[(0,l._)("h6",null,(0,n.zw)(a.product.title),1),a.coupon?((0,l.wg)(),(0,l.iD)("div",y,[(0,l._)("h5",null," 優惠價: "+(0,n.zw)(a.final_total),1),(0,l._)("div",w,[(0,l._)("p",null,"原價: "+(0,n.zw)(a.total),1)])])):((0,l.wg)(),(0,l.iD)("div",f,[(0,l._)("h5",null," 特價: "+(0,n.zw)(a.final_total),1)])),(0,l._)("a",{href:"",class:"removeBtn",onClick:(0,s.iM)((e=>t.removeItem(a.id)),["prevent"])},null,8,x),(0,l._)("div",k,[(0,l._)("button",(0,l.dG)({type:"button",class:"btn remove"},{disabled:a.qty<=1||t.btnStatus},{onClick:(0,s.iM)((e=>t.updateCart(a,!1)),["prevent"])}),M,16,L),(0,l._)("div",Z,[(0,l._)("p",null,(0,n.zw)(a.qty),1)]),(0,l._)("button",(0,l.dG)({type:"button",class:"btn add"},{disabled:t.btnStatus},{onClick:(0,s.iM)((e=>t.updateCart(a,!0)),["prevent"])}),z,16,D)])])])))),128))]),(0,l._)("div",P,[(0,l._)("button",{type:"button",class:"btn",onClick:a[1]||(a[1]=(0,s.iM)(((...a)=>t.cleanAll&&t.cleanAll(...a)),["prevent"]))},q)])])]),(0,l._)("div",I,[(0,l._)("div",$,[(0,l._)("div",A,[G,(0,l._)("div",N,[""!==S.enterCodeStatus?((0,l.wg)(),(0,l.iD)("p",T,(0,n.zw)(S.enterCodeStatus),1)):(0,l.kq)("",!0),(0,l.wy)((0,l._)("input",{type:"text",placeholder:"輸入優惠碼","onUpdate:modelValue":a[2]||(a[2]=t=>S.Code=t)},null,512),[[s.nr,S.Code]]),(0,l._)("button",{type:"button",class:"btn btn-primary",onClick:a[3]||(a[3]=(0,s.iM)(((...t)=>j.enterCode&&j.enterCode(...t)),["prevent"]))},U)])]),(0,l._)("table",Y,[(0,l._)("tbody",null,[(0,l._)("tr",null,[K,(0,l._)("td",O,[(0,l._)("p",null,(0,n.zw)(t.total),1)])]),(0,l._)("tr",null,[Q,(0,l._)("td",V,[(0,l._)("p",null,(0,n.zw)(t.final_total-t.total),1)])]),W]),(0,l._)("tfoot",null,[(0,l._)("tr",null,[(0,l._)("td",E,[(0,l._)("h4",null,"總計: NT$"+(0,n.zw)(t.final_total),1)])])])]),(0,l._)("div",F,[(0,l._)("button",{type:"button",class:"btn shop",onClick:a[4]||(a[4]=(0,s.iM)(((...t)=>j.viewMore&&j.viewMore(...t)),["prevent"]))},R),(0,l._)("button",{type:"button",class:"btn nextStep",onClick:a[5]||(a[5]=(0,s.iM)(((...t)=>j.nextStep&&j.nextStep(...t)),["prevent"]))},tt)])])])]))])])],64)}e(7658);var et=e(7364),lt=e(5314),st=e(4334),nt={components:{LoadingImg:et.Z},data(){return{Code:null,enterCodeStatus:""}},computed:{...(0,st.rn)(lt.Z,["cartList","total","final_total","btnStatus","isLoading"])},methods:{...(0,st.nv)(lt.Z,["getCartList","removeItem","cleanAll","updateCart"]),enterCode(){const t="https://vue3-course-api.hexschool.io/api/jysing-aip/coupon",a={code:this.Code};this.axios.post(t,{data:a}).then((t=>{!0===t.data.success?(this.getCartList(),this.enterCodeStatus=""):(this.enterCodeStatus=t.data.message,this.Code=null)}))},nextStep(){this.$router.push({name:"cartform"})},viewMore(){this.$router.push("/typeList/all")}},created(){this.getCartList()}},it=e(5727);const ot=(0,it.Z)(nt,[["render",at]]);var ct=ot}}]);
//# sourceMappingURL=255.b2b2d56a.js.map