{"version":3,"file":"js/384.a4a85a0f.js","mappings":"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","sources":["webpack://js-shop/./src/components/LoadingImg.vue","webpack://js-shop/./src/components/LoadingImg.vue?82c5","webpack://js-shop/./src/views/main/cart/CartList.vue","webpack://js-shop/./src/views/main/cart/CartList.vue?b1bc"],"sourcesContent":["<template>\r\n    <LoadingPage :active=\"loadStatus\" :opacity=\"0.9\" :background-color=\"`#fff`\">\r\n        <img\r\n        :src=\"img\"\r\n        alt=\"\"\r\n        style=\"width: 250px; height: 250px\"\r\n        />\r\n    </LoadingPage>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: ['loadStatus'],\r\n  data () {\r\n    return {\r\n      img: './assets/images/pokemon/pika.gif'\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./LoadingImg.vue?vue&type=template&id=f5350354\"\nimport script from \"./LoadingImg.vue?vue&type=script&lang=js\"\nexport * from \"./LoadingImg.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\user007\\\\Desktop\\\\project\\\\js-shop\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <LoadingImg :loadStatus=\"isLoading\"></LoadingImg>\r\n  <section class=\"mainCartList\">\r\n    <ul class=\"list-group\">\r\n      <li class=\"list-group-item\" v-for=\"item in cartList\" :key=\"item.id\">\r\n        <p>{{ item.product.title }}</p>\r\n        <input\r\n          type=\"number\"\r\n          name=\"itemQty\"\r\n          id=\"itemQty\"\r\n          v-model=\"item.qty\"\r\n          min=\"1\"\r\n          @change.prevent=\"updateCart(item)\"\r\n        />\r\n        <p v-if=\"item.coupon\">\r\n          優惠價 {{ item.final_total }}(折扣{{ item.coupon.percent }}%)\r\n        </p>\r\n        <p v-else>特價 {{ item.final_total }}</p>\r\n        <button type=\"button\" @click.prevent=\"removeItem(item.id)\">\r\n          <p>刪除</p>\r\n        </button>\r\n      </li>\r\n    </ul>\r\n    <button type=\"button\" @click.prevent=\"cleanAll\">\r\n      <p>全部清空</p>\r\n    </button>\r\n    <div class=\"inputCode\">\r\n      <input type=\"text\" placeholder=\"輸入優惠碼\" v-model=\"Code\" />\r\n      <button type=\"button\" @click.prevent=\"enterCode\">\r\n        <p>套用</p>\r\n      </button>\r\n    </div>\r\n    <p>原價 {{ total }}</p>\r\n    <p>折價 {{ total - final_total }}</p>\r\n    <p>總金額 {{ final_total }}</p>\r\n    <a href=\"#\" @click.prevent=\"nextStep()\">\r\n      <p>下一步</p>\r\n    </a>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport LoadingImg from '@/components/LoadingImg.vue'\r\n\r\nexport default {\r\n  components: {\r\n    LoadingImg\r\n  },\r\n  data () {\r\n    return {\r\n      cartList: null,\r\n      total: null,\r\n      final_total: null,\r\n      Code: null,\r\n      isLoading: false\r\n    }\r\n  },\r\n  methods: {\r\n    // 取得所有資料\r\n    getCartList () {\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\r\n      this.isLoading = true\r\n      this.axios.get(api).then((res) => {\r\n        this.cartList = res.data.data.carts\r\n        this.total = res.data.data.total\r\n        this.final_total = res.data.data.final_total\r\n        this.isLoading = false\r\n      })\r\n    },\r\n    // 更新單筆數量\r\n    updateCart (item) {\r\n      const { id, qty, product_id: proId } = item\r\n      const cartItem = {\r\n        product_id: proId,\r\n        qty: qty\r\n      }\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${id}`\r\n      this.axios.put(api, { data: cartItem }).then((res) => {\r\n        console.log(res)\r\n        this.getCartList()\r\n      })\r\n    },\r\n    // 刪除單筆\r\n    removeItem (id) {\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${id}`\r\n      this.axios.delete(api).then((res) => {\r\n        console.log(res)\r\n        this.getCartList()\r\n      })\r\n    },\r\n    // 全部刪除\r\n    cleanAll () {\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/carts`\r\n      this.axios.delete(api).then((res) => {\r\n        console.log(res)\r\n        this.getCartList()\r\n      })\r\n    },\r\n    // 套用優惠碼\r\n    enterCode () {\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/coupon`\r\n      const code = {\r\n        code: this.Code\r\n      }\r\n      this.axios.post(api, { data: code }).then((res) => {\r\n        console.log(res)\r\n        this.getCartList()\r\n      })\r\n    },\r\n    // 結帳\r\n    nextStep () {\r\n      this.$router.push({ name: 'cartform' })\r\n    }\r\n  },\r\n  created () {\r\n    this.getCartList()\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./CartList.vue?vue&type=template&id=70061adb\"\nimport script from \"./CartList.vue?vue&type=script&lang=js\"\nexport * from \"./CartList.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\user007\\\\Desktop\\\\project\\\\js-shop\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createBlock","_component_LoadingPage","active","$props","opacity","_createElementVNode","src","$data","alt","style","props","data","img","__exports__","render","class","_hoisted_7","_hoisted_9","_hoisted_12","_hoisted_14","_createVNode","_component_LoadingImg","loadStatus","_hoisted_1","_hoisted_2","_createElementBlock","_Fragment","item","key","id","product","title","type","name","qty","min","onChange","$options","coupon","final_total","percent","onClick","_hoisted_11","placeholder","href","components","LoadingImg","cartList","total","Code","isLoading","methods","getCartList","api","this","axios","get","then","res","carts","updateCart","product_id","proId","cartItem","put","console","log","removeItem","delete","cleanAll","enterCode","code","post","nextStep","$router","push","created"],"sourceRoot":""}